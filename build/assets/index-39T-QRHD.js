import{l as Ae,u as U,r as t,j as e,S as le,a as E,Z as Ge,c as _e,F as qe,f as We,T as be,X as ve,L as Me,b as ye,d as Re,H as Ee,m as Z,e as Ye,g as Je,h as we,i as Ke,A as Qe,C as Xe,k as et,n as tt,U as Ne,o as se,_ as st,p as Ce,q as ke,s as De,M as at,t as lt,v as nt,w as rt,x as it,y as ot,z as ct,B as He,D as dt,E as xt,G as mt,I as ht,J as ut,K as ft,R as pt,P as gt,N as bt,O as jt,Q as wt,V as vt,W as yt,Y as Nt,$ as z,a0 as Ct,a1 as kt}from"./vendor-B6_jMUrt.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const x of i)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&r(y)}).observe(document,{childList:!0,subtree:!0});function c(i){const x={};return i.integrity&&(x.integrity=i.integrity),i.referrerPolicy&&(x.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?x.credentials="include":i.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function r(i){if(i.ep)return;i.ep=!0;const x=c(i);fetch(i.href,x)}})();const Le="/assets/bg-BYohL4km.png",Se=Ae("http://localhost:5002"),Pe=Ae("http://localhost:5003"),ne=({isDoctor:l})=>{const n=U(),[c,r]=t.useState(!1),[i,x]=t.useState(!1),[y,d]=t.useState([]),[w,u]=t.useState(""),[f,m]=t.useState(!1);t.useEffect(()=>((Notification==null?void 0:Notification.permission)==="default"&&Notification.requestPermission().then(o=>{console.log(o==="granted"?"Notification permission granted":"Notification permission denied")}),Se.on("pushNotification",o=>{console.log("Received notification:",o),(Notification==null?void 0:Notification.permission)==="granted"&&new Notification(o.heading||"Notification",{body:o.message,icon:"https://via.placeholder.com/50"}),console.log(o.patientId),u("Report Verified!"),d(b=>[...b,`Your report has been verified by ${o.specilization}`]),x(!0),r(!0),setTimeout(()=>r(!1),5e3)}),()=>{Se.off("pushNotification")}),[]),t.useEffect(()=>((Notification==null?void 0:Notification.permission)==="default"&&Notification.requestPermission().then(o=>{console.log(o==="granted"?"Notification permission granted":"Notification permission denied")}),Pe.on("pushNotification",o=>{console.log("Received notification:",o),(Notification==null?void 0:Notification.permission)==="granted"&&new Notification(o.heading||"Notification",{body:o.message,icon:"https://via.placeholder.com/50"}),console.log(o.patientId),u("New Report!"),d(b=>[...b,`A new report of ${o.patientId} needs to be verified`]),x(!0),r(!0),setTimeout(()=>r(!1),3e3)}),()=>{Pe.off("pushNotification")}),[]);const h=()=>{r(o=>!o)},s=()=>{n("/")},a=()=>{n("/Forum")};return e.jsxs("div",{className:"relative flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#e7eef4] px-10 py-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{className:"flex items-center text-[#0d151c] text-lg font-bold leading-tight tracking-[-0.015em]",onClick:()=>n("/"),children:[e.jsx("img",{src:Le,alt:"logo",className:"h-7 w-7 mr-2"}),"Saanjh Sahayak"]})}),e.jsxs("div",{className:"flex flex-1 justify-end gap-8",children:[e.jsx("button",{onClick:a,className:"flex items-center justify-center px-4 py-2 rounded-xl bg-[#e7eef4] text-[#0d151c] font-bold text-sm hover:bg-[#d8e3ed] transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M216,40H40A16,16,0,0,0,24,56V184a16,16,0,0,0,16,16H57.1l-1.77,13.3a16,16,0,0,0,4.41,13.31A15.93,15.93,0,0,0,71.87,232,16.4,16.4,0,0,0,74,231.81l43.48-15.49h98.56A16,16,0,0,0,232,200V56A16,16,0,0,0,216,40ZM40,56H216V184H112.79a16,16,0,0,0-5.41.94L72,197.34l1.87-14a16,16,0,0,0-16-17.31H40ZM80,144a12,12,0,1,1,12-12A12,12,0,0,1,80,144Zm48,0a12,12,0,1,1,12-12A12,12,0,0,1,128,144Zm48,0a12,12,0,1,1,12-12A12,12,0,0,1,176,144Z"})}),"Health Forum"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#e7eef4] text-[#0d151c] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#0d151c]","data-icon":"ChatCircleDots","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM84,116a12,12,0,1,0,12,12A12,12,0,0,0,84,116Zm88,0a12,12,0,1,0,12,12A12,12,0,0,0,172,116Zm60,12A104,104,0,0,1,79.12,219.82L45.07,231.17a16,16,0,0,1-20.24-20.24l11.35-34.05A104,104,0,1,1,232,128Zm-16,0A88,88,0,1,0,51.81,172.06a8,8,0,0,1,.66,6.54L40,216,77.4,203.53a7.85,7.85,0,0,1,2.53-.42,8,8,0,0,1,4,1.08A88,88,0,0,0,216,128Z"})})})}),e.jsxs("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#e7eef4] text-[#0d151c] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5 relative",onClick:h,children:[e.jsx("div",{className:"text-[#0d151c]","data-icon":"Bell","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"})})}),i&&e.jsx("div",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]})]}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx("div",{className:"text-[#0d151c] font-medium text-sm leading-normal",children:l?"Doctor":"Care taker"})}),e.jsxs("div",{className:"relative",onClick:()=>m(!f),children:[e.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://cdn.usegalileo.ai/stability/62891830-57f4-4b6d-ab96-97aa59242b87.png")'}}),f&&e.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"10px"},children:e.jsx("button",{onClick:s,className:"logout-button",style:{backgroundColor:"gray",padding:"5px 10px",borderRadius:"5px"},children:"Logout"})})]})]}),c&&e.jsxs("div",{className:"absolute top-16 right-10 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:w}),y.map(o=>e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o},o))]})]})};function Dt(){const[l,n]=t.useState(""),c=U(),[r,i]=t.useState({firstName:"",lastName:"",dateOfBirth:"",gender:"",bloodGroup:"",phoneNumber:"",chronics:[]}),x=u=>{const{name:f,value:m}=u.target;i(h=>({...h,[f]:m}))},y=()=>{l.trim()!==""&&(i(u=>({...u,chronics:[...u.chronics,l.trim()]})),n(""))},d=u=>{i(f=>({...f,chronics:f.chronics.filter((m,h)=>h!==u)}))},w=async u=>{if(u.preventDefault(),console.log("Form submitted:",r),!r.firstName||!r.lastName||!r.dateOfBirth||!r.gender||!r.bloodGroup||!r.phoneNumber){le.fire({icon:"warning",title:"Incomplete Data",text:"Please fill in all the required fields before submitting!"});return}const f={...r,dateOfBirth:r.dateOfBirth?new Date(r.dateOfBirth).toISOString():null},m=await E.post("http://localhost:5001/en/setPatient",f);console.log(m.data.data),i({firstName:"",lastName:"",dateOfBirth:null,gender:"",bloodGroup:"",phoneNumber:"",chronics:[]}),le.fire({icon:"success",title:"success",text:"Data added successfully!"}),c(-1)};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-100",children:[e.jsx(ne,{}),e.jsx("div",{className:"flex-grow flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-4xl bg-white shadow-2xl rounded-3xl overflow-hidden",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("div",{className:"md:flex-shrink-0 bg-blue-600 md:w-48 flex items-center justify-center",children:e.jsx("svg",{className:"h-20 w-20 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsxs("div",{className:"p-8 md:flex-grow",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Add a New Patient"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Please enter the patient's details below"}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{required:!0,type:"text",name:"firstName",value:r.firstName,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:r.lastName,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Last name"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:r.dateOfBirth,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{name:"gender",value:r.gender,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Blood Group"}),e.jsx("input",{type:"text",name:"bloodGroup",value:r.bloodGroup,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Blood group"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:r.phoneNumber,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Chronic Conditions"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("input",{type:"text",value:l,onChange:u=>n(u.target.value),className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-l-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300",placeholder:"Enter a chronic condition"}),e.jsx("button",{type:"button",onClick:y,className:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"Add"})]}),e.jsx("div",{className:"mt-2 space-y-2",children:r.chronics.map((u,f)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-2 rounded",children:[e.jsx("span",{children:u}),e.jsx("button",{type:"button",onClick:()=>d(f),className:"text-red-500 hover:text-red-700",children:"Remove"})]},f))})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>c(-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create Patient"})]})]})]})]})})})]})}function je(...l){return l.filter(Boolean).join(" ")}function St(l){function n(){l.setEditPatients(!l.editPatients),l.setDeletePatients(!1),console.log("edit d",l.editPatients),console.log("delete d",l.deletePatients)}function c(){l.setDeletePatients(!l.deletePatients),l.setEditPatients(!1),console.log("edit d",l.editPatients),console.log("delete d",l.deletePatients)}const r=U();return e.jsxs(Ge,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs(_e,{className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:["Manage patients",e.jsx(qe,{className:"-mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})]})}),e.jsx(We,{transition:!0,className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:e.jsxs("div",{className:"py-1",children:[e.jsx(be,{children:({focus:i})=>e.jsx("a",{onClick:()=>r("/form"),className:je(i?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:"Add Patient"})}),e.jsx(be,{children:({focus:i})=>e.jsx("a",{onClick:n,className:je(i?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:"Edit Patient"})}),e.jsx(be,{children:({focus:i})=>e.jsx("a",{onClick:c,className:je(i?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:"Remove Patient"})})]})})]})}function Pt(l){const[n,c]=t.useState(!1),[r,i]=t.useState(!1),x=U(),[y,d]=t.useState([]),[w,u]=t.useState([]),[f,m]=t.useState(l.isDoctor),[h,s]=t.useState(!0),[a,o]=t.useState(!0),[b,N]=t.useState(""),v=g=>{const C=new Date,P=new Date(g);let R=C.getFullYear()-P.getFullYear();const _=C.getMonth()-P.getMonth();return(_<0||_===0&&C.getDate()<P.getDate())&&R--,R};async function M(){try{const g=await E.get("http://localhost:5001/en/getpatients");d(g.data),l.setNoofPatients(g.data.length),l.setAverageAge(Math.round(g.data.reduce((C,P)=>C+v(P.DOB),0)/g.data.length)),console.log("Average age:"+g.data.reduce((C,P)=>C+v(P.DOB),0)/g.data.length)}catch(g){console.error("Error fetching patients:",g)}}async function H(){try{const g=await E.get("http://localhost:5001/en/getreports");u(g.data)}catch(g){console.error("Error fetching reports:",g)}}t.useEffect(()=>{M(),H()},[]);const A=g=>{const C=new Date(g),P=String(C.getDate()).padStart(2,"0"),R=String(C.getMonth()+1).padStart(2,"0"),_=C.getFullYear();return`${P}/${R}/${_}`},B=(g,C)=>async()=>{try{const P=await E.get(`http://localhost:5001/en/getpatient/${C}`);x(l.isDoctor?"/doctoranalysis":"/caretakeranalysis",{state:{id:g,pid:C,isDoctor:l.isDoctor,patientData:P.data}})}catch(P){console.error("Error in handlePatient:",P)}},O=g=>new Promise(C=>setTimeout(C,g)),T=g=>async()=>{try{const C=await E.get(`http://localhost:5001/en/getpatient/${g}`);if(n&&!r)x("/edit",{state:{patientData:C.data}});else if(!n&&!r)x("/patient",{state:{id:g}});else{console.log("Deleting patient...");const P=g;try{const R=await E.post("http://localhost:5001/en/removepatient",{patientID:P});le.fire({icon:"success",title:"Patient Deleted",text:"Patient and related data have been successfully deleted!"}),await O(2e3),x(0),console.log(R.data)}catch(R){console.error("Error removing patient:",R.response?R.response.data:R.message),le.fire({icon:"error",title:"Error",text:`Failed to remove patient: ${R.response?R.response.data:R.message}`})}}}catch(C){console.error("Error in handleModify:",C),le.fire({icon:"error",title:"Error",text:`Failed to fetch patient data: ${C.message}`})}},V=y.filter(g=>g.name.toLowerCase().includes(b.toLowerCase()));y.filter(g=>g.name.toLowerCase().includes(b.toLowerCase()));const G=a?w.filter(g=>g.isVerified):w.filter(g=>!g.isVerified);return e.jsxs("div",{className:"layout-content-container flex flex-col max-w-[920px] flex-1 bg-[#f8fafb]",children:[e.jsx("div",{className:"flex flex-wrap justify-between gap-3 p-4",children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>s(!0),className:`text-lg font-semibold px-4 py-2 focus:outline-none transition-all duration-300 ${h?"text-[#0e141b] border-b-2 border-[#0e141b]":"text-[#4f7396] hover:text-[#0e141b]"}`,children:"Patients"}),e.jsx("button",{onClick:()=>s(!1),className:`text-lg font-semibold px-4 py-2 focus:outline-none transition-all duration-300 ${h?"text-[#4f7396] hover:text-[#0e141b]":"text-[#0e141b] border-b-2 border-[#0e141b]"}`,children:"Reports"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[!h&&e.jsx("button",{onClick:()=>o(!a),className:"px-4 py-2 bg-[#e8edf3] text-[#4f7396] rounded-md transition-all duration-300 hover:bg-[#d1d8e0] focus:outline-none focus:ring-2 focus:ring-[#4f7396] focus:ring-opacity-50",children:a?"Show Unverified":"Show Verified"}),e.jsx("div",{className:`${f?"hidden":"flex"}`,children:e.jsx(St,{editPatients:n,setEditPatients:c,deletePatients:r,setDeletePatients:i})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{placeholder:h?"Search patients":"Search reports",className:"w-full px-4 py-2 pl-10 pr-4 text-[#0e141b] bg-[#e8edf3] border border-[#e8edf3] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#4f7396] focus:border-transparent",value:b,onChange:g=>N(g.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("svg",{className:"w-5 h-5 text-[#4f7396]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]})}),e.jsx("div",{className:"flex-grow p-4",children:h?V.map((g,C)=>e.jsxs("div",{className:"flex items-center gap-4 bg-[#f8fafb] px-4 min-h-[72px] py-2 mb-3 transition-all duration-300 ease-in-out hover:bg-[#e8edf3] cursor-pointer rounded-xl",onClick:T(g._id),children:[e.jsx("div",{className:"bg-[#e8edf3] text-[#4f7396] font-bold rounded-full h-14 w-14 flex items-center justify-center",children:g.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex flex-col justify-center flex-grow",children:[e.jsx("p",{className:"text-[#0e141b] text-base font-medium leading-normal line-clamp-1",children:g.name}),e.jsxs("p",{className:"text-[#4f7396] text-sm font-normal leading-normal line-clamp-2",children:["Age: ",v(g.DOB),", Gender: ",g.gender]})]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-6 h-6 text-[#4f7396] ${n?"block":"hidden"}`,children:e.jsx("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712zM16.708 7.292l-10 10a4.125 4.125 0 0 0-1.088 1.864l-.579 2.314a.75.75 0 0 0 .91.91l2.314-.579a4.125 4.125 0 0 0 1.864-1.088l10-10-3.712-3.712z"})}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-6 h-6 text-[#f54748] ${r?"block":"hidden"}`,children:e.jsx("path",{fillRule:"evenodd",d:"M5.5 5.25a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 0 1.5H18v13a2.75 2.75 0 0 1-2.75 2.75H8.75A2.75 2.75 0 0 1 6 18.75V5.25h-.25a.75.75 0 0 1-.75-.75zm3 3.75a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75zm0 4.5a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75zm0 4.5a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75z",clipRule:"evenodd"})})]},C)):G.map((g,C)=>e.jsxs("div",{className:"flex items-center gap-4 bg-[#f8fafb] px-4 min-h-[72px] py-2 mb-3 transition-all duration-300 ease-in-out hover:bg-[#e8edf3] cursor-pointer rounded-xl",onClick:B(g._id,g.patientId),children:[e.jsx("div",{className:"bg-[#e8edf3] text-[#4f7396] font-bold rounded-full h-14 w-14 flex items-center justify-center",children:"R"}),e.jsxs("div",{className:"flex flex-col justify-center flex-grow",children:[e.jsx("p",{className:"text-[#0e141b] text-base font-medium leading-normal line-clamp-1",children:g.specialistReq}),e.jsxs("p",{className:"text-[#4f7396] text-sm font-normal leading-normal line-clamp-2",children:["Patient: ",g.patient,", Date: ",A(g.dateOfReport)]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.isVerified?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"}`,children:g.isVerified?"Verified":"Unverified"})]},C))})]})}function Ft(l){return e.jsxs("div",{className:"layout-content-container flex flex-col w-[360px]",children:[e.jsx("h3",{className:"text-[#0e141b] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Analytics"}),e.jsxs("div",{className:"flex flex-wrap gap-4 p-4",children:[e.jsxs("div",{className:"flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 border border-[#d0dbe6]",children:[e.jsx("p",{className:"text-[#0e141b] text-base font-medium leading-normal",children:"Total Patients"}),e.jsx("p",{className:"text-[#0e141b] tracking-light text-2xl font-bold leading-tight",children:l.noofPatients}),e.jsx("p",{className:"text-[#078838] text-base font-medium leading-normal",children:l.patientPercentage})]}),e.jsxs("div",{className:"flex min-w-[158px] flex-1 flex-col gap-2 rounded-xl p-6 border border-[#d0dbe6]",children:[e.jsx("p",{className:"text-[#0e141b] text-base font-medium leading-normal",children:"Average Age"}),e.jsx("p",{className:"text-[#0e141b] tracking-light text-2xl font-bold leading-tight",children:l.averageAge}),e.jsx("p",{className:"text-[#e73908] text-base font-medium leading-normal",children:l.agePercentage})]})]})]})}const Ve=()=>{const[l,n]=t.useState([]),[c,r]=t.useState(""),[i,x]=t.useState(!1),[y,d]=t.useState(!1),[w,u]=t.useState(!0),f=t.useRef(null),m=()=>{var a;(a=f.current)==null||a.scrollIntoView({behavior:"smooth"})};t.useEffect(m,[l]);const h=()=>{d(!y),w&&(n([{text:"Hello! I'm Althea, your personalized medical chatbot. I'm here to assist Patients with their queries. How can I help you today?",sender:"bot"}]),u(!1))},s=async a=>{if(a.preventDefault(),!c.trim())return;const o={text:c,sender:"user"};n(b=>[...b,o]),r(""),x(!0);try{const b=await E.post("http://localhost:5001/en/MedicalChatbotDoctor",{input:c});console.log(b.data);const N={text:b.data,sender:"bot"};n(v=>[...v,N])}catch(b){console.error("Error sending message:",b);const N={text:"Sorry, there was an error processing your request. Please try again.",sender:"bot"};n(v=>[...v,N])}finally{x(!1)}};return e.jsx(e.Fragment,{children:y?e.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col h-[500px] w-[350px] border border-gray-300 rounded-lg overflow-hidden shadow-lg bg-white",children:[e.jsxs("div",{className:"bg-[#e8edf3] text-black p-4 font-bold flex justify-between items-center",children:[e.jsx("span",{children:"Medical Chatbot"}),e.jsx("button",{onClick:h,className:"text-black hover:text-gray-950 focus:outline-none",children:e.jsx(ve,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map((a,o)=>e.jsx("div",{className:`flex ${a.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[70%] p-3 rounded-lg ${a.sender==="user"?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"}`,children:a.text})},o)),e.jsx("div",{ref:f})]}),e.jsxs("form",{onSubmit:s,className:"p-4 border-t border-gray-300 flex",children:[e.jsx("input",{type:"text",value:c,onChange:a=>r(a.target.value),placeholder:"Type your medical query...",className:"flex-1 p-2 border border-gray-300 rounded-l-md focus:outline-none focus:border-blue-500"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white p-2 rounded-r-md hover:bg-blue-700 focus:outline-none",disabled:i,children:i?e.jsx(Me,{className:"animate-spin"}):e.jsx(ye,{})})]})]}):e.jsx("button",{onClick:h,className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none",children:e.jsx(Re,{size:24})})})},At=()=>{const[l,n]=t.useState([]),[c,r]=t.useState(""),[i,x]=t.useState(!1),[y,d]=t.useState(!1),[w,u]=t.useState(!0),f=t.useRef(null),m=()=>{var a;(a=f.current)==null||a.scrollIntoView({behavior:"smooth"})};t.useEffect(m,[l]);const h=()=>{d(!y),w&&(n([{text:"Hello! I'm Luna, your personalized medical chatbot. I'm here to assist Patients with their queries. How can I help you today?",sender:"bot"}]),u(!1))},s=async a=>{if(a.preventDefault(),!c.trim())return;const o={text:c,sender:"user"};n(b=>[...b,o]),r(""),x(!0);try{const b=await E.post("http://localhost:5001/en/MedicalChatbotPatient",{input:c});console.log(b.data);const N={text:b.data,sender:"bot"};n(v=>[...v,N])}catch(b){console.error("Error sending message:",b);const N={text:"Sorry, there was an error processing your request. Please try again.",sender:"bot"};n(v=>[...v,N])}finally{x(!1)}};return e.jsx(e.Fragment,{children:y?e.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col h-[500px] w-[350px] border border-gray-300 rounded-lg overflow-hidden shadow-lg bg-white",children:[e.jsxs("div",{className:"bg-[#e8edf3] text-black p-4 font-bold flex justify-between items-center",children:[e.jsx("span",{children:"Medical Chatbot"}),e.jsx("button",{onClick:h,className:"text-black hover:text-gray-950 focus:outline-none",children:e.jsx(ve,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map((a,o)=>e.jsx("div",{className:`flex ${a.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[70%] p-3 rounded-lg ${a.sender==="user"?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"}`,children:a.text})},o)),e.jsx("div",{ref:f})]}),e.jsxs("form",{onSubmit:s,className:"p-4 border-t border-gray-300 flex",children:[e.jsx("input",{type:"text",value:c,onChange:a=>r(a.target.value),placeholder:"Type your medical query...",className:"flex-1 p-2 border border-gray-300 rounded-l-md focus:outline-none focus:border-blue-500"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white p-2 rounded-r-md hover:bg-blue-700 focus:outline-none",disabled:i,children:i?e.jsx(Me,{className:"animate-spin"}):e.jsx(ye,{})})]})]}):e.jsx("button",{onClick:h,className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none",children:e.jsx(Ee,{size:24})})})};function Mt(l){const[n,c]=t.useState(0),[r,i]=t.useState(0),[x,y]=t.useState();return U(),t.useEffect(()=>{y(l.isDoctor),console.log("is doctor",x)},[]),e.jsxs("div",{className:"relative flex size-full min-h-screen flex-col bg-[#f8fafb] group/design-root overflow-x-hidden",style:{fontFamily:'Inter, "Noto Sans", sans-serif'},children:[e.jsxs("div",{className:"layout-container flex h-full grow flex-col",children:[e.jsx(ne,{isDoctor:x}),e.jsxs("div",{className:"gap-1 px-6 flex flex-1 justify-center py-5",children:[e.jsx(Pt,{isDoctor:x,setNoofPatients:c,noofPatients:n,setAverageAge:i}),e.jsx(Ft,{noofPatients:n,patientPercentage:"+5%",averageAge:r,agePercentage:"-2%"})]})]}),x&&e.jsx(Ve,{}),!x&&e.jsx(At,{})]})}const Rt=()=>{const l=t.useRef(null),n=()=>{l.current.scrollIntoView({behavior:"smooth"})};let c=U();return e.jsx("div",{className:"relative flex size-full min-h-screen flex-col bg-[#F9FAFA] group/design-root overflow-x-hidden",children:e.jsxs("div",{className:"layout-container flex h-full grow flex-col",children:[e.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#EEEFF2] px-10 py-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{className:"flex items-center text-[#0d151c] text-lg font-bold leading-tight tracking-[-0.015em]",onClick:()=>c("/"),children:[e.jsx("img",{src:Le,alt:"logo",className:"h-7 w-7 mr-2"}),"Saanjh Sahayak"]})}),e.jsxs("div",{className:"flex flex-1 justify-end gap-8",children:[e.jsx("div",{className:"flex items-center gap-9",children:e.jsx("a",{className:"text-[#1C1D22] text-sm font-medium leading-normal cursor-pointer",onClick:n,children:"Features"})}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{className:"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#607AFB] text-[#F9FAFA] text-sm font-bold leading-normal tracking-[0.015em]",onClick:()=>c("/signin"),children:e.jsx("span",{className:"truncate",children:"Login"})})})]})]}),e.jsx("div",{className:"px-40 flex flex-1 justify-center py-5",children:e.jsxs("div",{className:"layout-content-container flex flex-col max-w-[960px] flex-1",children:[e.jsx("div",{className:"@container",children:e.jsx("div",{className:"@[480px]:p-4",children:e.jsxs("div",{className:"flex min-h-[480px] flex-col gap-6 bg-cover bg-center bg-no-repeat @[480px]:gap-8 @[480px]:rounded-xl items-start justify-end px-4 pb-10 @[480px]:px-10",style:{backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.4) 100%), url("https://cdn.usegalileo.ai/sdxl10/d0342d60-6ca8-4000-abde-e44f0d824c83.png")'},children:[e.jsxs("div",{className:"flex flex-col gap-2 text-left",children:[e.jsx("h1",{className:"text-white text-4xl font-black leading-tight tracking-[-0.033em] @[480px]:text-5xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em]",children:"Saanjh Sahayak, better care for our elders"}),e.jsx("h2",{className:"text-white text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal",children:"We are here to provide comprehensive and compassionate care to the elderly in old age homes."})]}),e.jsx("label",{className:"flex flex-col min-w-40 h-14 w-full max-w-[480px] @[480px]:h-16"})]})})}),e.jsxs("div",{className:"flex flex-col gap-10 px-4 py-10 @container",ref:l,children:[e.jsx("h1",{className:"text-[#1C1D22] tracking-light text-[32px] font-bold leading-tight @[480px]:text-4xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em] max-w-[720px]",children:"For Caretakers"}),e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-0",children:[e.jsxs("div",{className:"flex flex-1 gap-3 rounded-lg border border-[#D5D6DD] bg-[#FFFFFF] p-4 flex-col",children:[e.jsx("div",{className:"text-[#1C1D22]","data-icon":"FirstAid","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M216,88H168V40a16,16,0,0,0-16-16H104A16,16,0,0,0,88,40V88H40a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16H88v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V168h48a16,16,0,0,0,16-16V104A16,16,0,0,0,216,88Zm0,64H160a8,8,0,0,0-8,8v56H104V160a8,8,0,0,0-8-8H40V104H96a8,8,0,0,0,8-8V40h48V96a8,8,0,0,0,8,8h56Z"})})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[#1C1D22] text-base font-bold leading-tight",children:"Upload and Monitor Patient Reports"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Easily upload and monitor patient reports. Our system is designed to handle a variety of formats, ensuring a seamless experience."})]})]}),e.jsxs("div",{className:"flex flex-1 gap-3 rounded-lg border border-[#D5D6DD] bg-[#FFFFFF] p-4 flex-col",children:[e.jsx("div",{className:"text-[#1C1D22]","data-icon":"Notification","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M216,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V56A16,16,0,0,1,48,40h80a8,8,0,0,1,0,16H48V208H200V128a8,8,0,0,1,16,0Zm16-68a36,36,0,1,1-36-36A36,36,0,0,1,232,60Zm-16,0a20,20,0,1,0-20,20A20,20,0,0,0,216,60Z"})})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[#1C1D22] text-base font-bold leading-tight",children:"Receive Alerts and Reminders"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Get instant alerts and reminders for medication, doctor's appointments, and more. Stay on top of your loved one's care."})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-10 px-4 py-10 @container",children:[e.jsx("h1",{className:"text-[#1C1D22] tracking-light text-[32px] font-bold leading-tight @[480px]:text-4xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em] max-w-[720px]",children:"For Doctors"}),e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-0",children:[e.jsxs("div",{className:"flex flex-1 gap-3 rounded-lg border border-[#D5D6DD] bg-[#FFFFFF] p-4 flex-col",children:[e.jsx("div",{className:"text-[#1C1D22]","data-icon":"FirstAid","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M216,88H168V40a16,16,0,0,0-16-16H104A16,16,0,0,0,88,40V88H40a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16H88v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V168h48a16,16,0,0,0,16-16V104A16,16,0,0,0,216,88Zm0,64H160a8,8,0,0,0-8,8v56H104V160a8,8,0,0,0-8-8H40V104H96a8,8,0,0,0,8-8V40h48V96a8,8,0,0,0,8,8h56Z"})})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[#1C1D22] text-base font-bold leading-tight",children:"Verify Patient Information"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Quickly and securely verify patient information. Our platform is designed to ensure compliance with privacy and data protection regulations."})]})]}),e.jsxs("div",{className:"flex flex-1 gap-3 rounded-lg border border-[#D5D6DD] bg-[#FFFFFF] p-4 flex-col",children:[e.jsx("div",{className:"text-[#1C1D22]","data-icon":"Translate","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M239.15,212.42l-56-112a8,8,0,0,0-14.31,0l-21.71,43.43A88,88,0,0,1,100,126.93,103.65,103.65,0,0,0,127.69,64H152a8,8,0,0,0,0-16H96V32a8,8,0,0,0-16,0V48H24a8,8,0,0,0,0,16h87.63A87.76,87.76,0,0,1,88,116.35a87.74,87.74,0,0,1-19-31,8,8,0,1,0-15.08,5.34A103.63,103.63,0,0,0,76,127a87.55,87.55,0,0,1-52,17,8,8,0,0,0,0,16,103.46,103.46,0,0,0,64-22.08,104.18,104.18,0,0,0,51.44,21.31l-26.6,53.19a8,8,0,0,0,14.31,7.16L140.94,192h70.11l13.79,27.58A8,8,0,0,0,232,224a8,8,0,0,0,7.15-11.58ZM148.94,176,176,121.89,203.05,176Z"})})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-[#1C1D22] text-base font-bold leading-tight",children:"Analyze with Large Language Model"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Utilize our powerful Large Language Model for in-depth patient analysis. Get insights and recommendations based on the latest medical research."})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 pb-3",children:[e.jsx("div",{className:"w-full bg-center bg-no-repeat aspect-video bg-cover rounded-xl",style:{backgroundImage:'url("https://cdn.usegalileo.ai/stability/fb823941-87a6-47fb-998f-c8224ea8c6db.png")'}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1C1D22] text-base font-medium leading-normal",children:"Get help from experts"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Our team of geriatricians and nurse practitioners are here to help."})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pb-3",children:[e.jsx("div",{className:"w-full bg-center bg-no-repeat aspect-video bg-cover rounded-xl",style:{backgroundImage:'url("https://cdn.usegalileo.ai/stability/b543c2c9-c73f-4636-8737-59e6d3f7a20e.png")'}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1C1D22] text-base font-medium leading-normal",children:"Stay connected"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Easily communicate with our team via video calls, phone calls, or chat."})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pb-3",children:[e.jsx("div",{className:"w-full bg-center bg-no-repeat aspect-video bg-cover rounded-xl",style:{backgroundImage:'url("https://cdn.usegalileo.ai/sdxl10/8329d0d0-4083-4c19-89c0-de0625991c40.png")'}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1C1D22] text-base font-medium leading-normal",children:"Get reminders"}),e.jsx("p",{className:"text-[#3C3F4A] text-sm font-normal leading-normal",children:"Set up medication reminders and get alerts when it's time to take a dose."})]})]})]})]})})]})})},Et=l=>l.isOpen?e.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:e.jsxs(Z.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-white rounded-lg shadow-2xl p-8 w-96 max-w-full",children:[e.jsx(Z.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-20 h-20 mx-auto mb-6",children:e.jsx(Ye,{className:"w-full h-full text-blue-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Processing PDF"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Please wait while we analyze your test report PDF."}),e.jsxs("div",{className:"flex justify-around mb-6",children:[e.jsxs(Z.div,{whileHover:{scale:1.1},className:"flex flex-col items-center",children:[e.jsx(Je,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("span",{className:"text-sm",children:"Analyzing"})]}),e.jsxs(Z.div,{whileHover:{scale:1.1},className:"flex flex-col items-center",children:[e.jsx(we,{className:"w-8 h-8 text-yellow-500 mb-2"}),e.jsx("span",{className:"text-sm",children:"Precautions"})]}),e.jsxs(Z.div,{whileHover:{scale:1.1},className:"flex flex-col items-center",children:[e.jsx(Ke,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("span",{className:"text-sm",children:"Predictions"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:e.jsx(Z.div,{className:"bg-blue-600 h-2.5 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:3,repeat:1/0}})})]})}):null,Ie=l=>{const n=()=>{l.setOpenResult(!1)};return e.jsx(Qe,{children:l.openResult&&e.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:e.jsxs(Z.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-lg shadow-2xl p-8 w-96 max-w-full",children:[e.jsx(Z.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"w-24 h-24 mx-auto mb-6",children:l.isValid?e.jsx(et,{className:"w-full h-full text-red-500"}):e.jsx(Xe,{className:"w-full h-full text-green-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:l.isValid?"Invalid PDF":"Upload Successful!"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:l.isValid?"The file you uploaded is not a valid PDF. Please try again with a valid PDF file.":"Your report has been successfully uploaded and processed."}),e.jsx("div",{className:"flex justify-center space-x-4",children:e.jsx(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center px-4 py-2 bg-gray-300 text-gray-700 rounded-full shadow-lg hover:bg-gray-400 transition-colors duration-300",onClick:n,children:"Close"})})]})})})};function Ht(l){const[n,c]=t.useState(l.id),[r,i]=t.useState();t.useState(""),t.useState(null),t.useState(0),t.useState(null),t.useState(null),t.useState(null);const[x,y]=t.useState(null),[d,w]=t.useState(!1),[u,f]=t.useState(!1),[m,h]=t.useState(null),[s,a]=t.useState(!1),[o,b]=t.useState(!1),[N,v]=t.useState(""),[M,H]=t.useState(null),[A,B]=t.useState(null),[O,T]=t.useState(""),[V,G]=t.useState(""),[g,C]=t.useState(null);t.useState(null),t.useState(!1),t.useState(null),t.useEffect(()=>{const S=p=>{p.keyCode===27&&R()};return window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)}},[]);const P=S=>{const p=S.target.files[0];p&&p.type==="application/pdf"&&(B(p),G(p.name))},R=()=>{b(!1),v(""),C(null),B(null),T(""),G(""),H(null),a(!1),w(!1)},_=S=>{S.stopPropagation()},Y=U();async function ue(){console.log("patient id is : "+n);const S=await E.get(`http://localhost:5001/en/getpatient/${n}`);i(S.data)}async function re(){const S=await E.get(`http://localhost:5001/en/getdates/${n}`);y(S.data)}t.useEffect(()=>{ue(),re()},[n]);const ie=S=>{const p=new Date,k=new Date(S);let F=p.getFullYear()-k.getFullYear();const I=p.getMonth()-k.getMonth();return(I<0||I===0&&p.getDate()<k.getDate())&&F--,F},J=()=>{Y("/edit",{state:{patientData:r}})},oe=async S=>{if(w(!0),console.log(N),console.log(s),A)try{const p=new FileReader;p.onloadend=async()=>{const k=p.result.split(",")[1],F=S.target.value.replace("C:\\fakepath\\","");try{(await E.post("http://localhost:5001/en/uploadpdf",{file:k,filename:F,patientId:n,name:r.name})).data.data===!1?(w(!1),h(!0),f(!0)):(w(!1),h(!1),f(!0),Notification.permission==="granted"&&new Notification("Report Verified",{body:"The report has been successfully verified.",icon:"https://via.placeholder.com/50"}),setTimeout(()=>window.location.reload(),1e3))}catch(I){console.error("Backend Error:",I),w(!1),alert("File size too large or other issues."),Notification.permission==="granted"&&new Notification("Verification Failed",{body:"There was an error verifying the report. Please try again.",icon:"https://via.placeholder.com/50"})}},p.readAsDataURL(A)}catch(p){console.error("Error uploading image:",p),w(!1),alert("Image upload failed. Please try again.")}else console.log("No input file")},q=async S=>{try{l.isDoctor?Y("/doctoranalysis",{state:{id:S,pid:n,isDoctor:l.isDoctor,patientData:r}}):Y("/caretakeranalysis",{state:{id:S,pid:n,isDoctor:l.isDoctor,patientData:r}})}catch{}};return r&&x&&e.jsxs("div",{className:"px-40 flex flex-1 justify-center py-5",children:[e.jsxs("div",{className:"layout-content-container flex flex-col max-w-[960px] flex-1",children:[e.jsxs("div",{className:"relative flex p-4 @container",children:[e.jsx("div",{className:`absolute top-2 right-2 ${l.isDoctor?"hidden":""}`,children:e.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:J,children:e.jsx(tt,{size:20})})}),e.jsx("div",{className:"flex w-full flex-col gap-4 @[520px]:flex-row @[520px]:justify-between @[520px]:items-center",children:e.jsxs("div",{className:"flex gap-4 self-start",children:[e.jsx("div",{className:"bg-gray-200 rounded-full w-32 h-32 flex items-center justify-center",children:e.jsx(Ne,{className:"text-gray-500 w-20 h-20"})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#0d151c] text-[22px] font-bold leading-tight tracking-[-0.015em]",children:r.name}),e.jsxs("p",{className:"text-[#49779c] text-base font-normal leading-normal",children:["Age ",ie(r.DOB),", ",r.gender,", Blood type: ",r.bloodGroup]})]})]})})]}),e.jsxs("div",{className:"flex gap-4 bg-slate-50 px-4 py-3",children:[e.jsx("div",{className:"text-[#0d151c] flex items-center justify-center rounded-lg bg-[#e7eef4] shrink-0 size-12","data-icon":"User","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"})})}),e.jsxs("div",{className:"flex flex-1 flex-col justify-center",children:[e.jsx("p",{className:"text-[#0d151c] text-base font-medium leading-normal",children:"Patient Information"}),e.jsxs("p",{className:"text-[#49779c] text-sm font-normal leading-normal",children:["Previous test reports: ",r.reportsList.length]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-[#49779c] text-sm font-medium leading-normal mb-2",children:"Known health conditions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.chronics.map((S,p)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:S},p))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-4 min-h-14 justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-[#0d151c] flex items-center justify-center rounded-lg bg-[#e7eef4] shrink-0 size-10","data-icon":"Phone","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0s.08,0,.11,0A40.21,40.21,0,0,1,176,208Z"})})}),e.jsx("p",{className:"text-[#0d151c] text-base font-normal leading-normal flex-1 truncate",children:"Contact Number"})]}),e.jsx("div",{className:"shrink-0",children:e.jsxs("p",{className:"text-[#0d151c] text-base font-normal leading-normal",children:["(+91) ",r.phone]})})]}),e.jsxs("div",{className:"px-4 pb-3 pt-5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[e.jsx("h2",{className:"text-gray-900 text-2xl font-bold",children:"Report History"}),!l.isDoctor&&e.jsx("button",{onClick:()=>b(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Upload Reports"})]}),o&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 overflow-y-auto max-h-screen transition-opacity",onClick:R,children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md shadow-xl mx-4 md:mx-auto overflow-y-auto max-h-screen transform transition-all",style:{maxHeight:"650px"},onClick:_,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upload Report"}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",onClick:R,children:"Ã—"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:N,onChange:S=>v(S.target.value),placeholder:"Enter report description...",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-shadow",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload PDF Report"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col w-full h-24 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:V?e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-sm text-gray-500",children:V})}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload PDF"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF files only"})]})}),e.jsx("input",{type:"file",className:"hidden",onChange:P,accept:".pdf"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"dietPlan",checked:s,onChange:S=>a(S.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"dietPlan",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Do you want a diet plan?"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{onClick:R,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 font-medium text-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:oe,disabled:!A,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Upload"})]})]})]})})]}),e.jsx("div",{children:x.map((S,p)=>e.jsxs("div",{onClick:()=>{q(S.file)},className:"flex items-center gap-4 bg-slate-50 px-4 min-h-[72px] py-2 justify-between cursor-pointer hover:bg-slate-100 hover:scale-105 transition transform duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-[#0d151c] flex items-center justify-center rounded-lg bg-[#e7eef4] shrink-0 size-12","data-icon":"File","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"})})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#0d151c] text-base font-medium leading-normal line-clamp-1",children:S.date}),e.jsx("p",{className:"text-[#49779c] text-sm font-normal leading-normal line-clamp-2",children:S.specialistReq})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"text-[#0d151c] flex size-7 items-center justify-center","data-icon":"CaretRight","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"})})})})]},p))})]}),d&&e.jsx(Et,{isOpen:d}),u&&e.jsx(Ie,{openResult:u,setOpenResult:f,isValid:m})]})}function Lt(l){const{state:n}=se(),{id:c}=n;return e.jsx("div",{className:"relative flex size-full min-h-screen flex-col bg-slate-50 group/design-root overflow-x-hidden",style:{fontFamily:'Manrope, "Noto Sans", sans-serif'},children:e.jsxs("div",{className:"layout-container flex h-full grow flex-col",children:[e.jsx(ne,{patient:!0,isDoctor:l.isDoctor}),e.jsx(Ht,{isDoctor:l.isDoctor,id:c})]})})}const Vt=({setIsDoctor:l})=>{const[n,c]=t.useState("Select your role"),r=U(),[i,x]=t.useState(""),[y,d]=t.useState(""),w=f=>{const{name:m,value:h}=f.target;if(m==="email"){const s=h.toLowerCase();x(s)}else m==="password"&&d(h)},u=async()=>{if(i&&y){const f=await E.post("http://localhost:5001/en/login",{email:i,password:y});if(f.data.err){alert("Invaild Email");return}else if(f.data.error){alert("Invaild password");return}else console.log(f.data),c(f.data.id),l(f.data.id==="doctor");n?r("/main"):alert("Please select a role before signing in.")}else{alert("Please Enter Email and password");return}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex w-full max-w-4xl h-[80vh] bg-white rounded-xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 p-8 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:"Welcome to Saanjh Sahayak"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Please select if you are a doctor or a caretaker."}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("input",{type:"username",className:"login__input custom-input",placeholder:"Email",style:{border:"2px solid #D1D1D4",background:"none",borderRadius:"40px",padding:"10px",paddingLeft:"24px",fontWeight:"700",width:"100%",alignItems:"center",transition:".2s"},name:"email",value:i,onChange:w,required:!0}),e.jsx("input",{type:"password",className:"login__input custom-input",placeholder:"Password",style:{border:"2px solid #D1D1D4",background:"none",borderRadius:"40px",padding:"10px",paddingLeft:"24px",fontWeight:"700",width:"100%",alignItems:"center",transition:".2s"},name:"password",value:y,onChange:w,required:!0,autoComplete:"current-password"}),e.jsx("button",{className:"w-full py-3 rounded-lg transition-all bg-blue-600 hover:bg-blue-700 text-white",onClick:u,children:"Sign in"})]})]}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-blue-400 to-indigo-600 flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-4 z-10",children:"Saanjh Sahayak"}),e.jsx("p",{className:"text-xl text-blue-100 text-center mb-8 z-10",children:"Your Healthcare Companion"}),e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[e.jsx("div",{className:"absolute w-48 h-48 bg-white opacity-10 rounded-full -top-12 -left-12 animate-pulse"}),e.jsx("div",{className:"absolute w-72 h-72 bg-white opacity-10 rounded-full -bottom-16 -right-16 animate-pulse delay-1000"})]}),e.jsx("svg",{className:"w-32 h-32 text-white animate-float z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})]})]})})},It=()=>{const[l,n]=t.useState(null),c=r=>{n(r)};return e.jsx("div",{className:"relative flex items-center justify-center min-h-screen bg-slate-50",children:e.jsxs("div",{className:"layout-container flex flex-col max-w-[960px] w-full px-6",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-solid border-b-[#e7edf3] px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-[#0e141b]",children:[e.jsx("div",{className:"size-4",children:e.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z",fill:"currentColor"})})}),e.jsx("h2",{className:"text-[#0e141b] text-lg font-bold leading-tight tracking-[-0.015em]",children:"HealthCo"})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("button",{className:"text-[#1980e6] text-sm font-medium leading-normal",onClick:()=>alert("Link to professionals"),children:"For professionals"}),e.jsx("button",{className:"text-[#1980e6] text-sm font-medium leading-normal",onClick:()=>alert("Link to caretakers"),children:"For caretakers"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[e.jsx("h2",{className:"text-[#0e141b] tracking-light text-[28px] font-bold leading-tight pb-3",children:"Welcome to HealthCo"}),e.jsx("button",{className:"bg-[#1980e6] text-slate-50 text-base font-bold leading-normal tracking-[0.015em] py-3 px-8 rounded-lg mb-6",onClick:()=>alert("Display user selection"),children:"Select User"}),l===null&&e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{className:"flex items-center justify-center bg-[#1980e6] text-slate-50 text-base font-bold leading-normal tracking-[0.015em] py-3 px-8 rounded-lg",onClick:()=>c("doctor"),children:"Doctor"}),e.jsx("button",{className:"flex items-center justify-center bg-[#1980e6] text-slate-50 text-base font-bold leading-normal tracking-[0.015em] py-3 px-8 rounded-lg",onClick:()=>c("caretaker"),children:"Caretaker"})]}),l&&e.jsxs("div",{className:"text-[#0e141b] text-base font-normal leading-normal mt-4",children:["You are signed in as ",e.jsx("strong",{children:l}),"."]})]}),e.jsx("footer",{className:"flex justify-center py-3",children:e.jsx("p",{className:"text-[#4e7397] text-sm font-normal leading-normal",children:"By continuing, you agree to our Terms of Use and Privacy Policy"})})]})})};st.workerSrc=new URL("/assets/pdf.worker.min-DKQKFyKK.js",import.meta.url).toString();function zt(){const[l,n]=t.useState(""),[c,r]=t.useState(""),[i,x]=t.useState(null);t.useState(null);const y=async d=>{d.preventDefault();const w=new FormData;w.append("title",l),w.append("file",c),console.log(l,c);const u=await E.post("http://localhost:5001/en/uploadpdf",w,{headers:{"Content-Type":"multipart/form-data"}});console.log(u),u.data.status=="ok"&&(alert("Uploaded Successfully!!!"),getPdf())};return e.jsxs("div",{className:"App",children:[e.jsxs("form",{className:"formStyle",onSubmit:y,children:[e.jsx("h4",{children:"Upload Pdf in React"}),e.jsx("br",{}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Title",required:!0,onChange:d=>n(d.target.value)}),e.jsx("br",{}),e.jsx("input",{type:"file",class:"form-control",accept:"application/pdf",required:!0,onChange:d=>r(d.target.files[0])}),e.jsx("br",{}),e.jsx("button",{class:"btn btn-primary",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:"uploaded",children:[e.jsx("h4",{children:"Uploaded PDF:"}),e.jsx("div",{className:"output-div",children:i==null?"":i.map(d=>e.jsxs("div",{className:"inner-div",children:[e.jsxs("h6",{children:["Title: ",d.title]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>showPdf(d.pdf),children:"Show Pdf"})]}))})]})]})}function Bt(){const{state:l}=se(),{url:n}=l,[c,r]=t.useState(!1),[i,x]=t.useState(null),[y,d]=t.useState(1),w=t.useRef(null),u=t.useRef(null),f=t.useRef(null);t.useEffect(()=>{console.log(n),(async()=>{try{const N=await fetch(n).then(M=>M.arrayBuffer()),v=await Ce.getDocument({data:N}).promise;x(v),h(v,1,w.current,1)}catch(N){console.error("Error loading PDF:",N)}})()},[n]),t.useEffect(()=>{const b=()=>{f.current&&c&&i&&m()};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[c,i]);const m=async()=>{if(!i||!f.current)return;const N=(await i.getPage(1)).getViewport({scale:1}),v=f.current.clientWidth,M=f.current.clientHeight,H=v/N.width,A=M/N.height,B=Math.min(H,A)*2;d(B),s(B)},h=async(b,N,v,M)=>{const H=await b.getPage(N),A=H.getViewport({scale:M});v.height=A.height*2,v.width=A.width*2;const B=v.getContext("2d");B.scale(2,2),await H.render({canvasContext:B,viewport:A,renderInteractiveForms:!0,canvasFactory:{create:function(O,T){const V=document.createElement("canvas");return V.width=O*2,V.height=T*2,V},reset:function(O,T,V){O.canvas.width=T*2,O.canvas.height=V*2},destroy:function(O){}}})},s=async b=>{if(!(!i||!u.current)){u.current.innerHTML="";for(let N=1;N<=i.numPages;N++){const v=document.createElement("canvas");v.style.width="100%",v.style.height="auto",v.style.marginBottom="10px",await h(i,N,v,b),u.current.appendChild(v)}}},a=async()=>{r(!0),setTimeout(m,0)},o=()=>{r(!1),u.current&&(u.current.innerHTML="")};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:a,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"View Full PDF"}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{ref:f,className:"bg-white rounded-lg w-3/4 max-w-4xl h-5/6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"PDF Viewer"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]}),e.jsx("div",{ref:u,className:"flex-grow overflow-y-auto scrollbar-hide p-4",style:{msOverflowStyle:"none",scrollbarWidth:"none"},children:e.jsx("iframe",{src:n,width:"100%",height:"500px",style:{border:"none"}})})]})})]})}function Ot(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6 ",children:[e.jsx("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),e.jsx("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"})]})}function Tt(){const l=t.useRef(null),[n,c]=t.useState(0),r=se(),i=U(),[x,y]=t.useState(null),[d,w]=t.useState(null),[u,f]=t.useState(null),[m,h]=t.useState(null),[s,a]=t.useState(null),[o,b]=t.useState(!1),[N,v]=t.useState([]),[M,H]=t.useState(!1),[A,B]=t.useState(""),[O,T]=t.useState(null),[V,G]=t.useState(null),[g,C]=t.useState(!1),[P,R]=t.useState(null),[_,Y]=t.useState(1);t.useState("");const[ue,re]=t.useState(!1),[ie,J]=t.useState(!1);t.useEffect(()=>{re(!0)},[]);const oe=t.useRef(null),q=t.useRef(null),S=t.useRef(null);t.useEffect(()=>{(async()=>{if(V)try{const D=await fetch(V).then($=>$.arrayBuffer()),L=await Ce.getDocument({data:D}).promise;R(L),k(L,1,oe.current,1)}catch(D){console.error("Error loading PDF:",D)}})()},[V]),t.useEffect(()=>{const j=()=>{S.current&&g&&P&&p()};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[g,P]);const p=async()=>{if(!P||!S.current)return;const D=(await P.getPage(1)).getViewport({scale:1}),L=S.current.clientWidt,$=S.current.clientHeight,te=L/D.width,de=$/D.height,xe=Math.min(te,de)*2;Y(xe),F(xe)},k=async(j,D,L,$)=>{const te=await j.getPage(D),de=te.getViewport({scale:$});L.height=de.height*2,L.width=de.width*2;const xe=L.getContext("2d");xe.scale(2,2),await te.render({canvasContext:xe,viewport:de,renderInteractiveForms:!0,canvasFactory:{create:function(me,ge){const he=document.createElement("canvas");return he.width=me*2,he.height=ge*2,he},reset:function(me,ge,he){me.canvas.width=ge*2,me.canvas.height=he*2},destroy:function(me){}}})},F=async j=>{if(!(!P||!q.current)){q.current.innerHTML="";for(let D=1;D<=P.numPages;D++){const L=document.createElement("canvas");L.style.width="100%",L.style.height="auto",L.style.marginBottom="10px",await k(P,D,L,j),q.current.appendChild(L)}}};t.useEffect(()=>{if(r.state){const{id:j,pid:D,isDoctor:L,patientData:$}=r.state;y(D),w(j),f(L),h($)}},[r]),t.useEffect(()=>{(async()=>{if(d&&x)try{await Q(),await X()}catch(D){console.error("Error fetching data:",D)}})()},[d,x]),t.useEffect(()=>{(async()=>{if(s)try{await K()}catch(D){console.error("Error getting URL:",D)}})()},[s]);const I=async()=>{C(!0),setTimeout(p,0)},W=()=>{C(!1),q.current&&(q.current.innerHTML="")};async function K(){try{J(!1);const j=await E.get(`http://localhost:5001/en/pdfid/${s.file}`,{responseType:"arraybuffer"}),D=new Uint8Array(j.data),L=new Blob([D],{type:"application/pdf"});let $=window.URL.createObjectURL(L);G($),J(!0)}catch(j){console.error("Error fetching report:",j)}}async function Q(){try{console.log(d);const j=await E.get(`http://localhost:5001/en/getreport/${d}`);console.log(j.data),console.log(j.data.image),a(j.data),v(j.data.precautions),H(j.data.isVerified),B(j.data.doctorNotes||"")}catch(j){console.error("Error fetching report:",j)}}async function X(){try{J(!1);const j=await E.post("http://localhost:5001/en/getprevreports",{patientId:x,reportId:d});T(j.data)}catch(j){console.error("Error fetching dates:",j)}}const ce=()=>{b(!o),setTimeout(()=>{var j;(j=textareaRef.current)==null||j.focus()},0)},ee=j=>{const D=new Date,L=new Date(j);let $=D.getFullYear()-L.getFullYear();const te=D.getMonth()-L.getMonth();return(te<0||te===0&&D.getDate()<L.getDate())&&$--,$},ze=async()=>{try{H(!0);const j={...s,isVerified:!0},D=await E.post("http://localhost:5001/en/saveprecautions",{reportId:d,precautions:N,doctorNotes:A,patientId:x});a(D.data),console.log("Report verified successfully:",D),Notification.permission==="granted"&&new Notification("Report Verified",{body:"The report has been successfully verified.",icon:"https://via.placeholder.com/50"}),setTimeout(()=>window.location.reload(),2e3)}catch(j){console.error("Error verifying report:",j),Notification.permission==="granted"&&new Notification("Verification Failed",{body:"There was an error verifying the report. Please try again.",icon:"https://via.placeholder.com/50"})}},Be=j=>{i("/doctoranalysis",{replace:!0,state:{id:j,pid:x,isDoctor:u,patientData:m}}),window.scrollTo(0,0)},Oe={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f9f9f9",fontFamily:"Arial, sans-serif"},Te={display:"flex",gap:"8px",marginTop:"20px"},pe=j=>({width:"12px",height:"12px",backgroundColor:"#3498db",borderRadius:"50%",animation:"bounce 0.6s ease-in-out infinite",animationDelay:j}),Ze={fontSize:"1.2em",color:"#555",marginTop:"10px"},$e=`
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
  `;if(!s||!O||!m||!ie)return e.jsxs("div",{style:Oe,children:[e.jsx("style",{children:$e}),e.jsxs("div",{style:Te,children:[e.jsx("div",{style:pe("0s")}),e.jsx("div",{style:pe("0.2s")}),e.jsx("div",{style:pe("0.4s")})]}),e.jsx("div",{style:Ze,children:"Loading, please wait..."})]});const Ue=()=>{i("/Forum")},fe=s.imagemetrics;return console.log("imagemetrics : ",fe),fe&&fe.length>0&&fe.map(j=>{const[D,L]=j.split(": ");return{label:D,value:parseFloat(L)}}),s&&O&&m&&V&&e.jsx("div",{className:"relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden ",style:{fontFamily:'Manrope, "Noto Sans", sans-serif'},children:e.jsxs("div",{className:"layout-container flex h-full grow flex-col",children:[e.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f0f2f4] px-10 py-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-[#111418]",children:[e.jsx("div",{className:"size-4",children:e.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z",fill:"currentColor"})})}),e.jsx("h2",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em]",children:"Saanjh sahayak"})]}),e.jsxs("div",{className:"flex flex-1 justify-end gap-8",children:[e.jsxs("div",{className:"flex items-center gap-9",children:[e.jsx("a",{className:"text-[#111418] text-sm font-medium leading-normal",href:"#",children:"Patients"}),e.jsx("a",{className:"text-[#111418] text-sm font-medium leading-normal",href:"#",children:"Reports"}),e.jsx("button",{onClick:Ue,className:"flex items-center justify-center px-4 py-2 rounded-xl bg-[#e7eef4] text-[#0d151c] font-bold text-sm hover:bg-[#d8e3ed] transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M216,40H40A16,16,0,0,0,24,56V184a16,16,0,0,0,16,16H57.1l-1.77,13.3a16,16,0,0,0,4.41,13.31A15.93,15.93,0,0,0,71.87,232,16.4,16.4,0,0,0,74,231.81l43.48-15.49h98.56A16,16,0,0,0,232,200V56A16,16,0,0,0,216,40ZM40,56H216V184H112.79a16,16,0,0,0-5.41.94L72,197.34l1.87-14a16,16,0,0,0-16-17.31H40ZM80,144a12,12,0,1,1,12-12A12,12,0,0,1,80,144Zm48,0a12,12,0,1,1,12-12A12,12,0,0,1,128,144Zm48,0a12,12,0,1,1,12-12A12,12,0,0,1,176,144Z"})}),"Health Forum"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#f0f2f4] text-[#111418] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#111418]","data-icon":"MagnifyingGlass","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})})}),e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#f0f2f4] text-[#111418] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#111418]","data-icon":"Bell","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"})})})}),e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#f0f2f4] text-[#111418] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#111418]","data-icon":"ChatCircleDots","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM84,116a12,12,0,1,0,12,12A12,12,0,0,0,84,116Zm88,0a12,12,0,1,0,12,12A12,12,0,0,0,172,116Zm60,12A104,104,0,0,1,79.12,219.82L45.07,231.17a16,16,0,0,1-20.24-20.24l11.35-34.05A104,104,0,1,1,232,128Zm-16,0A88,88,0,1,0,51.81,172.06a8,8,0,0,1,.66,6.54L40,216,77.4,203.53a7.85,7.85,0,0,1,2.53-.42,8,8,0,0,1,4,1.08A88,88,0,0,0,216,128Z"})})})})]}),e.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://cdn.usegalileo.ai/stability/1c59f8b8-2f0d-4280-9e6d-75d6c0cee0d6.png")'}})]})]}),e.jsx("div",{className:"px-40 flex flex-1 justify-center py-5",children:e.jsxs("div",{className:"layout-content-container flex flex-col max-w-[960px] flex-1",children:[e.jsx("div",{className:"flex flex-wrap justify-between gap-3 p-4",children:e.jsx("p",{className:"text-[#111418] text-4xl font-black leading-tight tracking-[-0.033em] min-w-72 content-center",children:"Patient Information"})}),e.jsx("div",{className:"flex p-4 @container",children:e.jsx("div",{className:"flex w-full flex-col gap-4 @[520px]:flex-row @[520px]:justify-between @[520px]:items-start",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-gray-200 rounded-full w-32 h-32 flex items-center justify-center",children:e.jsx(Ne,{className:"text-gray-500 w-20 h-20"})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#111418] text-[22px] font-bold leading-tight tracking-[-0.015em]",children:m.name}),e.jsxs("p",{className:"text-[#637588] text-base font-normal leading-normal",children:[m.gender,", Age ",ee(m.DOB)]}),e.jsxs("p",{className:"text-[#637588] text-base font-normal leading-normal",children:[" Blood Group: ",m.bloodGroup]})]})]})})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Known Conditions"}),e.jsx("div",{className:"flex gap-3 p-3 flex-wrap pr-4",children:m.chronics.map((j,D)=>e.jsx("div",{className:"flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-xl bg-[#f0f2f4] pl-4 pr-4",children:e.jsx("p",{className:"text-[#111418] text-sm font-medium leading-normal",children:j})},D))}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Current Report"}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{ref:S,className:"bg-white rounded-lg w-3/4 max-w-4xl h-5/6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"PDF Viewer"}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]}),e.jsx("div",{ref:q,className:"flex-grow overflow-y-auto scrollbar-hide p-4",style:{msOverflowStyle:"none",scrollbarWidth:"none"},children:e.jsx("iframe",{src:V,width:"100%",height:"500px",style:{border:"none"}})})]})}),e.jsxs("div",{onClick:I,className:"flex items-center gap-4 bg-white px-4 min-h-[72px] py-2 justify-between hover:bg-slate-100 hover:scale-105 transition transform duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-[#111418] flex items-center justify-center rounded-lg bg-[#f0f2f4] shrink-0 size-12","data-icon":"File","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"})})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#111418] text-base font-medium leading-normal line-clamp-1",children:"Test Report"}),e.jsx("p",{className:"text-[#637588] text-sm font-normal leading-normal line-clamp-2",children:"Report from 27 June 2024"})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"text-[#111418] flex size-7 items-center justify-center","data-icon":"CaretRight","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"})})})})]}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Analysis"}),e.jsx("div",{className:"text-lg   tracking-[-0.020em] ",children:e.jsx("p",{className:"px-4 pb-2 pt-4",children:s.summary})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Precautions"}),e.jsx("div",{className:"p-4 @container",children:e.jsxs("div",{className:"flex flex-1 items-start justify-between gap-4 rounded-xl border border-[#dce0e5] bg-white p-5 @[480px]:flex-row @[480px]:items-center",style:{height:n?`${n+20}px`:"auto"},children:[e.jsx("div",{className:"flex flex-col gap-1 flex-1",children:o&&!s.isVerified?e.jsx("textarea",{defaultValue:N.join(`
`),className:"border border-[#dce0e5] rounded-xl p-2 flex-1",onChange:j=>v(j.target.value.split(`
`))}):e.jsx("ul",{className:"text-[#637588] text-base font-normal leading-normal flex-1",ref:l,children:N.map((j,D)=>e.jsx("li",{children:j},D))})}),e.jsx("button",{onClick:ce,className:` ${M?"hidden":""}  flex min-w-[60px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#1b7ada] text-white text-sm font-medium leading-normal`,children:o?e.jsx("span",{className:"truncate",children:"Save"}):e.jsx(Ot,{})})]})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Predictions"}),e.jsx("div",{className:"p-4 @container",children:e.jsx("div",{className:"flex flex-1  items-start justify-between gap-4 rounded-xl border border-[#dce0e5] bg-white p-5 @[480px]:flex-row @[480px]:items-center",children:e.jsx("div",{className:"flex flex-col gap-1 flex-1",children:e.jsx("ul",{className:"text-[#637588] text-base font-normal leading-normal flex-1",ref:l,children:s.possibleDiseases.map((j,D)=>e.jsx("li",{children:j},D))})})})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Doctor's Advice"}),e.jsx("div",{className:"flex max-w-[480px] flex-1 flex-wrap items-end gap-4 px-4 py-3",children:e.jsx("label",{className:"flex flex-col min-w-40 flex-1",children:s.isVerified?e.jsx("div",{className:"text-[#637588] text-base font-normal leading-normal flex-1",ref:l,children:s.doctorNotes}):e.jsx("textarea",{defaultValue:s.doctorNotes,className:"border border-[#dce0e5] rounded-xl p-2 flex-1",onChange:j=>B(j.target.value)})})}),e.jsx("div",{className:"flex px-4 py-3 justify-end",children:e.jsx("button",{onClick:ze,className:`${s.isVerified?"hidden":""} flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#1b7ada] text-white text-sm font-bold leading-normal tracking-[0.015em]`,children:e.jsx("span",{className:"truncate",children:"verify"})})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Previous Reports"}),e.jsx("div",{children:O.map((j,D)=>e.jsxs("div",{onClick:()=>{Be(j.file)},className:"flex items-center gap-4  px-4 min-h-[72px] py-2 justify-between cursor-pointer hover:bg-slate-100 hover:scale-105 transition transform duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-[#0d151c] flex items-center justify-center rounded-lg bg-[#e7eef4] shrink-0 size-12","data-icon":"File","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"})})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#0d151c] text-base font-medium leading-normal line-clamp-1",children:j.date}),e.jsx("p",{className:"text-[#49779c] text-sm font-normal leading-normal line-clamp-2",children:j.specialistReq})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"text-[#0d151c] flex size-7 items-center justify-center","data-icon":"CaretRight","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"})})})})]},D))})]})})]})})}const Zt=()=>{const[l,n]=t.useState(""),[c,r]=t.useState(null),[i,x]=t.useState(null),[y,d]=t.useState(null);function w(m){const h=m.target.files[0];if(d(h.size/(1024*1024)),h){const s=new FileReader;s.onloadend=()=>{r(s.result.split(",")[1])},s.readAsDataURL(h);const a=m.target.value.replace("C:\\fakepath\\","");n(a)}else alert("No file selected")}const u=async m=>{m.preventDefault();try{await E.post("http://localhost:5001/en/uploadpdf",{file:c,filename:l}),console.log("Successfully uploaded.")}catch(h){console.log("Error uploading details:",h),alert("File size too large")}},f=async m=>{m.preventDefault();try{console.log("hi");const h=await E.get("http://localhost:5001/en/pdfid/66813196189877e17f54a9e0",{responseType:"arraybuffer"}),s=new Uint8Array(h.data),a=new Blob([s],{type:"application/pdf"});let o=window.URL.createObjectURL(a);x(o)}catch(h){console.log("Error uploading details:",h),alert("File size too large")}};return e.jsxs("div",{children:[e.jsxs("form",{onSubmit:u,children:[e.jsx("input",{type:"file",onChange:w,accept:"application/pdf"}),e.jsx("button",{type:"submit",children:"Upload"})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:f,children:"show pdf"}),i&&e.jsx("embed",{src:i,type:"application/pdf",width:"100%",height:"600px"})]})};function $t(){const l=t.useRef(null),[n,c]=t.useState(0),r=se(),i=U(),[x,y]=t.useState(null),[d,w]=t.useState(null),[u,f]=t.useState(null),[m,h]=t.useState(null),[s,a]=t.useState([]);t.useState(!1);const[o,b]=t.useState(null),[N,v]=t.useState(null),[M,H]=t.useState(!1),[A,B]=t.useState(null),[O,T]=t.useState(null),[V,G]=t.useState(1),g=t.useRef(null),C=t.useRef(null),P=t.useRef(null);t.useEffect(()=>{(async()=>{if(N)try{const k=await fetch(N).then(I=>I.arrayBuffer()),F=await Ce.getDocument({data:k}).promise;B(F),_(F,1,g.current,1)}catch(k){console.error("Error loading PDF:",k)}})()},[N]),t.useEffect(()=>{const p=()=>{P.current&&M&&A&&R()};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[M,A]);const R=async()=>{if(!A||!P.current)return;const k=(await A.getPage(1)).getViewport({scale:1}),F=P.current.clientWidth,I=P.current.clientHeight,W=F/k.width,K=I/k.height,Q=Math.min(W,K)*2;G(Q),Y(Q)},_=async(p,k,F,I)=>{const W=await p.getPage(k),K=W.getViewport({scale:I});F.height=K.height*2,F.width=K.width*2;const Q=F.getContext("2d");Q.scale(2,2),await W.render({canvasContext:Q,viewport:K,renderInteractiveForms:!0,canvasFactory:{create:function(X,ce){const ee=document.createElement("canvas");return ee.width=X*2,ee.height=ce*2,ee},reset:function(X,ce,ee){X.canvas.width=ce*2,X.canvas.height=ee*2},destroy:function(X){}}})},Y=async p=>{if(!(!A||!C.current)){C.current.innerHTML="";for(let k=1;k<=A.numPages;k++){const F=document.createElement("canvas");F.style.width="100%",F.style.height="auto",F.style.marginBottom="10px",await _(A,k,F,p),C.current.appendChild(F)}}};t.useEffect(()=>{if(r.state){const{id:p,pid:k,isDoctor:F,patientData:I}=r.state;y(k),w(p),f(I),T(F)}},[r]),t.useEffect(()=>{(async()=>{if(d&&x)try{await J(),await oe()}catch(k){console.error("Error fetching data:",k)}})()},[d,x]),t.useEffect(()=>{(async()=>{if(m)try{await ie()}catch(k){console.error("Error getting URL:",k)}})()},[m]);const ue=async()=>{H(!0),setTimeout(R,0)},re=()=>{H(!1),C.current&&(C.current.innerHTML="")};async function ie(){try{const p=await E.get(`http://localhost:5001/en/pdfid/${m.file}`,{responseType:"arraybuffer"}),k=new Uint8Array(p.data),F=new Blob([k],{type:"application/pdf"});let I=window.URL.createObjectURL(F);v(I)}catch(p){console.error("Error fetching report:",p)}}async function J(){try{const p=await E.get(`http://localhost:5001/en/getreport/${d}`);h(p.data),console.log(m),a(p.data.precautions)}catch(p){console.error("Error fetching report:",p)}}async function oe(){try{const p=await E.post("http://localhost:5001/en/getprevreports",{patientId:x,reportId:d});b(p.data)}catch(p){console.error("Error fetching dates:",p)}}const q=p=>{const k=new Date,F=new Date(p);let I=k.getFullYear()-F.getFullYear();const W=k.getMonth()-F.getMonth();return(W<0||W===0&&k.getDate()<F.getDate())&&I--,I},S=p=>{i("/caretakeranalysis",{replace:!0,state:{id:p,pid:x,isDoctor:O,patientData:u}}),window.scrollTo(0,0)};return!m||!o||!u?e.jsx("div",{children:"Loading..."}):m&&o&&u&&N&&e.jsx("div",{className:"relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden ",style:{fontFamily:'Manrope, "Noto Sans", sans-serif'},children:e.jsxs("div",{className:"layout-container flex h-full grow flex-col",children:[e.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f0f2f4] px-10 py-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-[#111418]",children:[e.jsx("div",{className:"size-4",children:e.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z",fill:"currentColor"})})}),e.jsx("h2",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em]",children:"Saanjh sahayak"})]}),e.jsxs("div",{className:"flex flex-1 justify-end gap-8",children:[e.jsxs("div",{className:"flex items-center gap-9",children:[e.jsx("a",{className:"text-[#111418] text-sm font-medium leading-normal",href:"#",children:"Patients"}),e.jsx("a",{className:"text-[#111418] text-sm font-medium leading-normal",href:"#",children:"Reports"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#f0f2f4] text-[#111418] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#111418]","data-icon":"MagnifyingGlass","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})})}),e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#f0f2f4] text-[#111418] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#111418]","data-icon":"Bell","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"})})})}),e.jsx("button",{className:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-[#f0f2f4] text-[#111418] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5",children:e.jsx("div",{className:"text-[#111418]","data-icon":"ChatCircleDots","data-size":"20px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM84,116a12,12,0,1,0,12,12A12,12,0,0,0,84,116Zm88,0a12,12,0,1,0,12,12A12,12,0,0,0,172,116Zm60,12A104,104,0,0,1,79.12,219.82L45.07,231.17a16,16,0,0,1-20.24-20.24l11.35-34.05A104,104,0,1,1,232,128Zm-16,0A88,88,0,1,0,51.81,172.06a8,8,0,0,1,.66,6.54L40,216,77.4,203.53a7.85,7.85,0,0,1,2.53-.42,8,8,0,0,1,4,1.08A88,88,0,0,0,216,128Z"})})})})]}),e.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://cdn.usegalileo.ai/stability/1c59f8b8-2f0d-4280-9e6d-75d6c0cee0d6.png")'}})]})]}),e.jsx("div",{className:"px-40 flex flex-1 justify-center py-5",children:e.jsxs("div",{className:"layout-content-container flex flex-col max-w-[960px] flex-1",children:[e.jsx("div",{className:"flex flex-wrap justify-between gap-3 p-4",children:e.jsx("p",{className:"text-[#111418] text-4xl font-black leading-tight tracking-[-0.033em] min-w-72 content-center",children:"Patient Information"})}),e.jsx("div",{className:"flex p-4 @container",children:e.jsx("div",{className:"flex w-full flex-col gap-4 @[520px]:flex-row @[520px]:justify-between @[520px]:items-start",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-gray-200 rounded-full w-32 h-32 flex items-center justify-center",children:e.jsx(Ne,{className:"text-gray-500 w-20 h-20"})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#111418] text-[22px] font-bold leading-tight tracking-[-0.015em]",children:u.name}),e.jsxs("p",{className:"text-[#637588] text-base font-normal leading-normal",children:[u.gender,", Age ",q(u.DOB)]}),e.jsxs("p",{className:"text-[#637588] text-base font-normal leading-normal",children:[" Blood Group: ",u.bloodGroup]})]})]})})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Known Conditions"}),e.jsx("div",{className:"flex gap-3 p-3 flex-wrap pr-4",children:u.chronics.map((p,k)=>e.jsx("div",{className:"flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-xl bg-[#f0f2f4] pl-4 pr-4",children:e.jsx("p",{className:"text-[#111418] text-sm font-medium leading-normal",children:p})},k))}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("button",{onClick:()=>i("/consult",{state:{specialist:m.specialistReq}}),style:{margin:"auto"},className:"w-half py-3 px-6 bg-[#607AFB] hover:bg-[#e7e9eb] text-[#F9FAFA] rounded-xl transition-colors duration-200 text-base font-medium flex items-center justify-center gap-2",children:[e.jsx(Re,{size:20}),"consult near by doctors"]})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Current Report"}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{ref:P,className:"bg-white rounded-lg w-3/4 max-w-4xl h-5/6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"PDF Viewer"}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]}),e.jsx("div",{ref:C,className:"flex-grow overflow-y-auto scrollbar-hide p-4",style:{msOverflowStyle:"none",scrollbarWidth:"none"},children:e.jsx("iframe",{src:N,width:"100%",height:"500px",style:{border:"none"}})})]})}),e.jsxs("div",{onClick:ue,className:"flex items-center gap-4 bg-white px-4 min-h-[72px] py-2 justify-between hover:bg-slate-100 hover:scale-105 transition transform duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-[#111418] flex items-center justify-center rounded-lg bg-[#f0f2f4] shrink-0 size-12","data-icon":"File","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"})})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#111418] text-base font-medium leading-normal line-clamp-1",children:"Test Report"}),e.jsx("p",{className:"text-[#637588] text-sm font-normal leading-normal line-clamp-2",children:"Report from 27 June 2024"})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"text-[#111418] flex size-7 items-center justify-center","data-icon":"CaretRight","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"})})})})]}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Analysis"}),e.jsx("div",{className:"text-lg   tracking-[-0.020em] ",children:e.jsx("p",{className:"px-4 pb-2 pt-4",children:m.summary})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Precautions"}),e.jsx("div",{className:"p-4 @container",children:e.jsx("div",{className:"flex flex-1 items-start justify-between gap-4 rounded-xl border border-[#dce0e5] bg-white p-5 @[480px]:flex-row @[480px]:items-center",style:{height:n?`${n+20}px`:"auto"},children:e.jsx("div",{className:"flex flex-col gap-1 flex-1",children:e.jsx("ul",{className:"text-[#637588] text-base font-normal leading-normal flex-1",ref:l,children:s.map((p,k)=>e.jsx("li",{children:p},k))})})})}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("button",{onClick:()=>{i("/Food",{state:{prompt:m.Diet}})},className:"w-full py-3 px-6 bg-[#f0f2f4] hover:bg-[#e7e9eb] text-[#111418] rounded-xl transition-colors duration-200 text-base font-medium flex items-center justify-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 15C3 15 5.73 13 9 13C12.27 13 14.27 15 18 15C21.73 15 23 13 23 13V5C23 5 21.73 3 18 3C14.27 3 12.27 5 9 5C5.73 5 3 3 3 3V15Z"}),e.jsx("path",{d:"M3 15V21"})]}),"View Recommended Diet Plan"]})}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Doctor's Advice"}),e.jsx("div",{className:"flex max-w-[480px] flex-1 flex-wrap items-end gap-4 px-4 py-3",children:e.jsx("label",{className:"flex flex-col min-w-40 flex-1",children:m.doctorNotes===""?e.jsx(e.Fragment,{}):e.jsx("div",{className:"text-[#637588] text-base font-normal leading-normal flex-1",ref:l,children:m.doctorNotes})})}),e.jsx("div",{className:"flex px-4 py-3 justify-end"}),e.jsx("h3",{className:"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4",children:"Previous Reports"}),e.jsx("div",{children:o.map((p,k)=>e.jsxs("div",{onClick:()=>{S(p.file)},className:"flex items-center gap-4  px-4 min-h-[72px] py-2 justify-between cursor-pointer hover:bg-slate-100 hover:scale-105 transition transform duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-[#0d151c] flex items-center justify-center rounded-lg bg-[#e7eef4] shrink-0 size-12","data-icon":"File","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"})})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[#0d151c] text-base font-medium leading-normal line-clamp-1",children:p.date}),e.jsx("p",{className:"text-[#49779c] text-sm font-normal leading-normal line-clamp-2",children:p.specialistReq})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"text-[#0d151c] flex size-7 items-center justify-center","data-icon":"CaretRight","data-size":"24px","data-weight":"regular",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"})})})})]},k))})]})})]})})}function Ut(){const[l,n]=t.useState(""),c=se(),r=U(),[i,x]=t.useState(null);t.useEffect(()=>{if(c.state){const{patientData:s}=c.state;x(s),w({firstName:s.name,lastName:"",dateOfBirth:y(s.DOB),gender:s.gender,bloodGroup:s.bloodGroup,phoneNumber:s.phone,chronics:s.chronics})}},[c]);function y(s){const a=new Date(s),o=String(a.getDate()).padStart(2,"0"),b=String(a.getMonth()+1).padStart(2,"0"),N=a.getFullYear();return`${o}/${b}/${N}`}const[d,w]=t.useState({firstName:"",lastName:"",dateOfBirth:"",gender:"",bloodGroup:"",phoneNumber:"",chronics:""}),u=s=>{const{name:a,value:o}=s.target;w(b=>({...b,[a]:o}))},f=()=>{l.trim()!==""&&(w(s=>({...s,chronics:[...s.chronics,l.trim()]})),n(""))},m=s=>{w(a=>({...a,chronics:a.chronics.filter((o,b)=>b!==s)}))},h=async s=>{s.preventDefault(),console.log("Form submitted:",d);const a={...d,dateOfBirth:d.dateOfBirth?new Date(d.dateOfBirth).toISOString():null},o=await E.post("http://localhost:5001/en/editPatient",{formDataToSend:a,patientId:i._id});console.log(o.data.data),w({firstName:"",lastName:"",dateOfBirth:null,gender:"",bloodGroup:"",phoneNumber:"",chronics:[]}),le.fire({icon:"success",title:"success",text:"changes made successfully!"}),r(-1)};return i&&e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-100",children:[e.jsx(ne,{}),e.jsx("div",{className:"flex-grow flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-4xl bg-white shadow-2xl rounded-3xl overflow-hidden",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("div",{className:"md:flex-shrink-0 bg-blue-600 md:w-48 flex items-center justify-center",children:e.jsx("svg",{className:"h-20 w-20 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsxs("div",{className:"p-8 md:flex-grow",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Edit Patient"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Please enter the patient's details below"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{required:!0,type:"text",name:"firstName",value:d.firstName,onChange:u,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:u,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Last name"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:d.dateOfBirth,onChange:u,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{name:"gender",value:d.gender,onChange:u,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Blood Group"}),e.jsx("input",{type:"text",name:"bloodGroup",value:d.bloodGroup,onChange:u,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Blood group"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:d.phoneNumber,onChange:u,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Chronic Conditions"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("input",{type:"text",value:l,onChange:s=>n(s.target.value),className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-l-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300",placeholder:"Enter a chronic condition"}),e.jsx("button",{type:"button",onClick:f,className:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"Add"})]}),e.jsx("div",{className:"mt-2 space-y-2",children:d.chronics.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-2 rounded",children:[e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>m(a),className:"text-red-500 hover:text-red-700",children:"Remove"})]},a))})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save"})]})]})]})]})})})]})}const Gt=()=>{var h;const n=(h=se().state)==null?void 0:h.prompt,[c,r]=t.useState(),[i,x]=t.useState("foods-to-eat"),y={"Foods to Eat":{"Recommended-Food":"No recommended foods available","Diet-Explanation":"No diet explanation available"},"Foods to Avoid":{Avoid_food:"No foods to avoid specified","Diet-Explanation":"No diet explanation available"},"Meal Timings":{morning:{"Diet-Explanation":"No morning meal explanation available","Recommended-Food":"No morning meal recommendations available"},afternoon:{"Diet-Explanation":"No afternoon meal explanation available","Recommended-Food":"No afternoon meal recommendations available"},evening:{"Diet-Explanation":"No evening meal explanation available","Recommended-Food":"No evening meal recommendations available"},night:{"Diet-Explanation":"No night meal explanation available","Recommended-Food":"No night meal recommendations available"}},"health-Specific guidlines":"No health-specific guidelines available"},d=s=>{try{let a=s.split(".").reduce((o,b)=>o==null?void 0:o[b],n);return a||(a=s.replace(/-/g,"_").split(".").reduce((b,N)=>b==null?void 0:b[N],n)),a||(a=s.split(".").reduce((o,b)=>o==null?void 0:o[b],y)),a||"No data available"}catch(a){return console.error("Error accessing data:",a),"Error loading data"}};t.useEffect(()=>{r(localStorage.getItem("isDoctor"))},[]);const w=[{id:"foods-to-eat",label:"Foods to Eat",icon:e.jsx(ke,{className:"w-5 h-5"})},{id:"foods-to-avoid",label:"Foods to Avoid",icon:e.jsx(we,{className:"w-5 h-5"})},{id:"meal-timings",label:"Meal Timings",icon:e.jsx(De,{className:"w-5 h-5"})}],u=s=>{switch(s){case"morning":return e.jsx(rt,{className:"w-5 h-5 text-yellow-500"});case"afternoon":return e.jsx(nt,{className:"w-5 h-5 text-orange-500"});case"evening":return e.jsx(lt,{className:"w-5 h-5 text-pink-500"});case"night":return e.jsx(at,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(De,{className:"w-5 h-5"})}},f=s=>s?s.split(",").map(a=>a.trim()):["No items available"],m=s=>s?s.split(".").map(a=>a.trim()).filter(a=>a.length>0):["No guidelines available"];return n?e.jsxs("div",{children:[e.jsx(ne,{isDoctor:c}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3 mb-6",children:"ðŸ½ï¸ Dietary Guidelines"}),e.jsx("div",{className:"flex justify-center space-x-4 mb-8 border-b",children:w.map(s=>e.jsxs("button",{onClick:()=>x(s.id),className:`flex items-center gap-2 px-4 py-3 transition-all duration-300 ${i===s.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-500"}`,children:[s.icon,e.jsx("span",{className:"font-medium",children:s.label})]},s.id))}),e.jsxs(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[i==="foods-to-eat"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-700 mb-3 flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Recommended Foods"]}),e.jsx("ul",{className:"list-disc ml-6 text-gray-800 font-bold",children:f(d("Foods to Eat.Recommended-Food")).map((s,a)=>e.jsx("li",{children:s},a))}),e.jsx("p",{className:"text-gray-600 mt-4",children:d("Foods to Eat.Diet-Explanation")})]})}),i==="foods-to-avoid"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-3 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Foods to Avoid"]}),e.jsx("ul",{className:"list-disc ml-6 text-gray-800 font-bold",children:f(d("Foods to Avoid.Avoid_food")).map((s,a)=>e.jsx("li",{children:s},a))}),e.jsx("p",{className:"text-gray-600 mt-4",children:d("Foods to Avoid.Diet-Explanation")})]})}),i==="meal-timings"&&e.jsx("div",{className:"grid gap-6",children:Object.entries(n["Meal Timings"]||y["Meal Timings"]).map(([s,a])=>e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[u(s),e.jsx("span",{className:"capitalize",children:s})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:d(`Meal Timings.${s}.Diet-Explanation`)}),e.jsx("ul",{className:"list-disc ml-6 text-gray-800 font-bold",children:f(d(`Meal Timings.${s}.Recommended-Food`)).map((o,b)=>e.jsx("li",{children:o},b))})]},s))})]},i)]})}),e.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Health-Specific Guidelines"}),e.jsx("div",{className:"space-y-6",children:Object.entries(n["health-Specific guidlines"]||y["health-Specific guidlines"]).map(([s,a])=>e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-3 capitalize",children:s.replace(/-/g," ")}),e.jsx("ul",{className:"list-disc ml-6 space-y-2",children:m(a).map((o,b)=>e.jsx("li",{className:"text-gray-700",children:o},b))})]},s))})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-lg text-gray-500",children:"No diet plan data available."})})},_t=()=>{const[l,n]=t.useState(!1),[c,r]=t.useState({name:"Anonymous User",role:"Patient"}),[i,x]=t.useState([{id:1,user:{name:"Dr. Emily Chen",role:"Doctor"},content:"Urgent: Looking for a kidney donor for a patient with chronic renal failure.",timestamp:"2 hours ago",comments:[{id:101,user:{name:"Michael Rodriguez",role:"Patient"},content:"I might be interested in helping. How can I get tested?",timestamp:"1 hour ago"}]},{id:2,user:{name:"Sarah Johnson",role:"Patient"},content:"Need advice on managing type 2 diabetes lifestyle changes.",timestamp:"5 hours ago",comments:[]},{id:3,user:{name:"Dr. Anil Mehta",role:"Doctor"},content:"Emergency: O+ blood required for a critical surgery at City Hospital. Please contact if available.",timestamp:"30 minutes ago",comments:[{id:201,user:{name:"Rahul Sharma",role:"Patient"},content:"I am O+ and willing to donate. Please share the details.",timestamp:"15 minutes ago"},{id:202,user:{name:"Anjali Verma",role:"Patient"},content:"I have O+ blood and am nearby City Hospital. How can I help?",timestamp:"10 minutes ago"}]},{id:4,user:{name:"Priya Nair",role:"Patient"},content:"Emergency: AB- blood urgently needed for a newborn at Apollo Hospital. Anyone willing to donate?",timestamp:"1 hour ago",comments:[{id:301,user:{name:"Dr. Aarti Kumar",role:"Doctor"},content:"Please provide more details or contact Apollo Hospitalâ€™s blood bank immediately.",timestamp:"45 minutes ago"}]}]),[y,d]=t.useState(""),[w,u]=t.useState({});t.useEffect(()=>{const s=localStorage.getItem("isDoctor")==="true";n(s),r({name:s?"Dr. Bushan Raju":"Anurag",role:s?"Doctor":"Patient"})},[]);const f=()=>{if(y.trim()){const s={id:i.length+1,user:c,content:y,timestamp:"Just now",comments:[]};x([s,...i]),d("")}},m=s=>{const a=w[s];a!=null&&a.trim()&&(x(i.map(o=>o.id===s?{...o,comments:[...o.comments,{id:o.comments.length+1,user:c,content:a,timestamp:"Just now"}]}:o)),u({...w,[s]:""}))},h=({role:s="Patient",isPostOwner:a=!1,size:o="md"})=>{const b=s==="Doctor"?"text-blue-600 bg-blue-50":s==="Patient"?"text-green-600 bg-green-50":"text-purple-600 bg-purple-50",N=a?"ring-2 ring-yellow-400":"",v=o==="sm"?"w-6 h-6":"w-8 h-8",M=o==="sm"?"p-0.5":"p-1";return e.jsxs("div",{className:`rounded-full relative ${b} ${N} ${M} flex items-center justify-center`,children:[s==="Doctor"?e.jsx(Ee,{className:v}):e.jsx(ct,{className:v}),a&&e.jsx(He,{className:"absolute -top-1 -right-1 w-3 h-3 text-yellow-500 bg-white rounded-full",fill:"currentColor"})]})};return e.jsxs("div",{className:"min-h-screen w-full bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 fixed top-0 w-full z-10",children:e.jsxs("div",{className:"max-w-screen-xl mx-auto px-4 h-14 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(it,{className:"w-6 h-6 text-blue-600"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Healthcare Community Forum"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{role:c.role,isPostOwner:!0,size:"sm"}),e.jsx("span",{className:"text-sm text-gray-600",children:c.name})]})]})}),e.jsxs("div",{className:"max-w-screen-xl mx-auto px-4 pt-20",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 mb-4",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{role:c.role,isPostOwner:!0,size:"sm"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("textarea",{placeholder:"Start a new discussion...",className:"w-full p-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm resize-none",value:y,onChange:s=>d(s.target.value),rows:2}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs("button",{onClick:f,className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200 space-x-2 text-sm font-bold",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{children:"Post"})]})})]})]})})}),e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center p-3 border-b border-gray-100",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{role:s.user.role,isPostOwner:s.user.name===c.name,size:"sm"})}),e.jsx("div",{className:"ml-2 flex-grow",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:s.user.name}),e.jsx("span",{className:"text-xs text-gray-500",children:"â€¢"}),e.jsx("span",{className:"text-xs text-gray-500",children:s.timestamp})]})})]}),e.jsx("div",{className:"p-3 text-sm text-gray-800 font-bold",children:s.content}),e.jsxs("div",{className:"bg-gray-50 border-t border-gray-100",children:[s.comments.map(a=>e.jsxs("div",{className:"p-3 border-b border-gray-100 flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{role:a.user.role,isPostOwner:a.user.name===c.name,size:"sm"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.user.name}),e.jsx("span",{className:"text-xs text-gray-500",children:"â€¢"}),e.jsx("span",{className:"text-xs text-gray-500",children:a.timestamp})]}),e.jsx("p",{className:"text-sm text-gray-700",children:a.content})]})]},a.id)),e.jsxs("div",{className:"p-3 flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{role:c.role,isPostOwner:!1,size:"sm"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("textarea",{placeholder:"Write a comment...",className:"w-full p-2 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm resize-none bg-white",value:w[s.id]||"",onChange:a=>u({...w,[s.id]:a.target.value}),rows:1}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs("button",{onClick:()=>m(s.id),className:"flex items-center bg-blue-600 text-white px-3 py-1.5 rounded-md hover:bg-blue-700 transition duration-200 space-x-1.5 text-sm font-bold",children:[e.jsx(ye,{className:"w-3 h-3"}),e.jsx("span",{children:"Comment"})]})})]})]})]})]},s.id))})]})]})},qt=({children:l,className:n=""})=>e.jsx("div",{className:`bg-white rounded-lg shadow-md ${n}`,children:l}),ae=({children:l,onClick:n,className:c=""})=>e.jsx("button",{onClick:n,className:`px-4 py-2 rounded-md transition-colors ${c}`,children:l}),Wt=({isOpen:l,onClose:n,children:c})=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ve,{className:"w-6 h-6"})})}),c]})}):null,Yt=({isOpen:l,onClose:n,doctor:c})=>{const[r,i]=t.useState(1),[x,y]=t.useState(""),[d,w]=t.useState(""),[u,f]=t.useState(!1),m=async()=>{try{f(!0),i(3)}catch(a){console.error("Error booking appointment:",a)}},h=()=>{const a=[];for(let o=9;o<=17;o++)a.push(`${o}:00`),a.push(`${o}:30`);return a},s=()=>{switch(r){case 1:return e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Select Date"}),e.jsx("input",{type:"date",min:new Date().toISOString().split("T")[0],className:"w-full p-2 border rounded-md mb-4",value:x,onChange:a=>y(a.target.value)}),e.jsx(ae,{onClick:()=>i(2),className:"w-full bg-blue-500 text-white hover:bg-blue-600",disabled:!x,children:"Next"})]});case 2:return e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Select Time"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4 max-h-48 overflow-y-auto",children:h().map(a=>e.jsx("button",{onClick:()=>w(a),className:`p-2 rounded-md ${d===a?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:a},a))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ae,{onClick:()=>i(1),className:"flex-1 bg-gray-100 hover:bg-gray-200",children:"Back"}),e.jsx(ae,{onClick:m,className:"flex-1 bg-blue-500 text-white hover:bg-blue-600",disabled:!d,children:"Confirm"})]})]});case 3:return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(ut,{className:"w-16 h-16 text-green-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Appointment Confirmed!"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md mb-4",children:[e.jsx("p",{className:"font-medium",children:c.doctor_name}),e.jsx("p",{className:"text-gray-600",children:x}),e.jsx("p",{className:"text-gray-600",children:d})]}),e.jsx(ae,{onClick:n,className:"w-full bg-blue-500 text-white hover:bg-blue-600",children:"Done"})]})}};return e.jsxs(Wt,{isOpen:l,onClose:n,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Book Appointment"}),e.jsxs("p",{className:"text-gray-600",children:["with ",c==null?void 0:c.doctor_name]})]}),s()]})},Jt=({doctor:l})=>{const[n,c]=t.useState(!1),r=()=>{const i=`https://www.google.com/maps?q=${l.locality_latitude},${l.locality_longitude}`;window.open(i,"_blank")};return e.jsxs(qt,{className:"w-full mb-4 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("img",{src:l.image_url||"/api/placeholder/150/150",alt:l.doctor_name,className:"w-24 h-24 rounded-full object-cover border-2 border-gray-100"}),e.jsx("span",{className:"ml-4 text-sm text-green-500 font-semibold bg-green-100 px-2 py-1 rounded-full",children:"Verified"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-800",children:l.doctor_name}),e.jsx("p",{className:"text-gray-600 mb-2",children:l.specialization})]}),e.jsxs(ae,{onClick:()=>c(!0),className:"bg-blue-500 text-white hover:bg-blue-600 flex items-center",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Book Appointment"]})]}),e.jsxs(ae,{onClick:r,className:"text-gray-500 hover:text-blue-500 flex items-center mb-2 hover:bg-gray-50 rounded-md",children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),l.locality&&l.city?e.jsxs("span",{children:[l.locality,", ",l.city]}):e.jsx(e.Fragment,{}),e.jsx(ht,{className:"w-4 h-4 ml-2"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(He,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"text-gray-600",children:"4.5"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("span",{className:"text-gray-600",children:"10+ years exp."})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-md mt-2",children:e.jsx("p",{className:"text-gray-700 line-clamp-2",children:l.summary})}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm",children:"Online Booking Available"}),e.jsx("span",{className:"px-3 py-1 bg-green-50 text-green-600 rounded-full text-sm",children:"Video Consultation"})]})]})]})}),e.jsx(Yt,{isOpen:n,onClose:()=>c(!1),doctor:l})]})},Kt=()=>{const[l,n]=t.useState(""),[c,r]=t.useState([]),[i,x]=t.useState([]);t.useState([]),t.useState("");const y=se();t.useEffect(()=>{if(y.state.specialist){const m=y.state.specialist;w(m)}},[y.state]);const d=()=>new Promise((m,h)=>{if(!navigator.geolocation){h("Geolocation is not supported by your browser");return}const s={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(a=>{const o=[a.coords.latitude,a.coords.longitude];m(o)},a=>{let o;switch(a.code){case a.PERMISSION_DENIED:o="User denied the request for Geolocation.";break;case a.POSITION_UNAVAILABLE:o="Location information is unavailable.";break;case a.TIMEOUT:o="The request to get user location timed out.";break;default:o="An unknown error occurred."}h(o)},s)}),w=async m=>{try{const h=await d();console.log("Coordinates:",h);const s={spec:m,loc:"hyderabad",coordy:h,flag:!0},a=await E.post("http://localhost:5001/en/consult",s);x(a.data)}catch(h){console.error("Error fetching doctor data:",h)}},u=m=>{const h=m.target.value.toLowerCase();n(h);const s=i.filter(a=>a.doctor_name.toLowerCase().includes(h)||a.specialization.toLowerCase().includes(h)||a.city&&a.city.toLowerCase().includes(h)||a.locality&&a.locality.toLowerCase().includes(h));r(s)},f=l?c:i;return e.jsxs(e.Fragment,{children:[e.jsx(ne,{isDoctor:!1}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-900 mb-6",children:"Find Your Doctor"}),e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by doctor name, specialization, or location...",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:u})]})]}),f.length===0?e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No doctors found matching your search criteria."})}):e.jsx("div",{className:"space-y-6",children:f.map((m,h)=>e.jsx(Jt,{doctor:m},h))})]})})]})};function Qt(l){const[n,c]=t.useState(null),[r,i]=t.useState(""),[x,y]=t.useState(!1),[d,w]=t.useState(null),[u,f]=t.useState({success:!1,error:!1,message:""}),m=t.useRef(null),h=async()=>{if(!n){f({success:!1,error:!0,message:"No PDF selected"});return}try{y(!0),f({success:!1,error:!1,message:""});const v=new FileReader;v.onloadend=async()=>{var A,B;const M=v.result.split(",")[1],H=n.name.replace("C:\\fakepath\\","");try{const T=(await E.post("http://localhost:5001/en/uploadstatement",{file:M,filename:H})).data.data;try{const V=JSON.parse(T);w(V)}catch{try{const g=T.substring(0,T.lastIndexOf("]"))+"]"+"}",C=JSON.parse(g);w(C)}catch{try{const g=T.substring(0,T.lastIndexOf("{")),C=g.lastIndexOf("}"),P=g.substring(0,C+1)+"]}",R=JSON.parse(P);w(R)}catch{console.error("Could not completely repair the JSON string")}}}f({success:!0,error:!1,message:"PDF uploaded successfully!"}),m.current&&(m.current.value=""),c(null),i("")}catch(O){console.log("error is",O),f({success:!1,error:!0,message:((B=(A=O.response)==null?void 0:A.data)==null?void 0:B.message)||"Upload failed. Please try again."})}},v.readAsDataURL(n)}catch{f({success:!1,error:!0,message:"Error processing file"})}finally{y(!1)}},s=v=>{const M=v.target.files[0];M&&M.type==="application/pdf"?(c(M),i(M.name),f({success:!1,error:!1,message:""})):(c(null),i(""),f({success:!1,error:!0,message:"Please upload a valid PDF file"}))},a=()=>{m.current&&m.current.click()},o=()=>{if(!(d!=null&&d.statements)||!Array.isArray(d.statements))return{totalDebit:0,totalCredit:0};const v=d.statements.filter(H=>H.is_debit).reduce((H,A)=>H+A.amount,0),M=d.statements.filter(H=>!H.is_debit).reduce((H,A)=>H+A.amount,0);return{totalDebit:v,totalCredit:M}},{totalDebit:b,totalCredit:N}=o();return e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("input",{type:"file",ref:m,className:"hidden",onChange:s,accept:".pdf"}),e.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:[e.jsx(ft,{className:"mr-2"}),"Select PDF"]}),r&&e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[200px]",children:r}),e.jsx("button",{onClick:h,disabled:!n||x,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Uploading...":"Upload"})]}),u.error&&e.jsx("div",{className:"mt-2 text-red-600 text-sm",children:u.message}),u.success&&e.jsx("div",{className:"mt-2 text-green-600 text-sm",children:u.message}),d&&d.statements&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-lg font-semibold",children:["Statement Validity:",e.jsx("span",{className:`ml-2 ${d.is_valid?"text-green-600":"text-red-600"}`,children:d.is_valid?"Valid":"Invalid"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"bg-green-100 p-3 rounded-md",children:[e.jsx("span",{className:"font-semibold",children:"Total Credit: "}),e.jsxs("span",{className:"text-green-700",children:["â‚¹",N.toFixed(2)]})]}),e.jsxs("div",{className:"bg-red-100 p-3 rounded-md",children:[e.jsx("span",{className:"font-semibold",children:"Total Debit: "}),e.jsxs("span",{className:"text-red-700",children:["â‚¹",b.toFixed(2)]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Expense Name"}),e.jsx("th",{className:"p-3 text-right",children:"Amount"}),e.jsx("th",{className:"p-3 text-center",children:"Type"})]})}),e.jsx("tbody",{children:d.statements&&d.statements.map((v,M)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3",children:v.name_of_expense}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:v.is_debit?"text-red-600":"text-green-600",children:["â‚¹",v.amount.toFixed(2)]})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${v.is_debit?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:v.is_debit?"Debit":"Credit"})})]},M))})]})})]})]})}const Fe=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9DE00"],Xt=[{name:"Food at Home",value:6e3},{name:"Food Away From Home",value:1500},{name:"Housing",value:1e4},{name:"Transportation",value:8500},{name:"Healthcare",value:3e3},{name:"Personal Finance",value:5e3},{name:"Savings",value:11e3},{name:"Entertainment",value:450},{name:"Personal Care",value:500},{name:"Education",value:2e3},{name:"Other Expenses",value:700}],es=({expenses:l=Xt})=>{const n=l.filter(c=>c.value>0);return n.length===0?e.jsx("div",{className:"w-full h-96 flex items-center justify-center text-gray-500",children:"No expense data available"}):e.jsxs("div",{className:"realtive w-full h-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center mb-4",children:"Monthly Budget Breakdown"}),e.jsx("div",{className:"w-full h-[500px]",children:e.jsx(pt,{width:"100%",height:"100%",children:e.jsxs(gt,{children:[e.jsx(bt,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:"80%",fill:"#8884d8",dataKey:"value",label:({name:c,percent:r})=>`${c} (${(r*100).toFixed(0)}%)`,children:n.map((c,r)=>e.jsx(jt,{fill:Fe[r%Fe.length]},`cell-${r}`))}),e.jsx(wt,{formatter:(c,r)=>[`â‚¹${c.toLocaleString()}`,r]}),e.jsx(vt,{layout:"vertical",verticalAlign:"down",wrapperStyle:{paddingLeft:"20px",overflow:"auto",maxHeight:"200px"}})]})})})]})};function ts(){const[l,n]=t.useState(()=>{const c=localStorage.getItem("isDoctor");return c!==null?JSON.parse(c):!0});return t.useEffect(()=>{localStorage.setItem("isDoctor",JSON.stringify(l))},[l]),e.jsx("div",{className:"App",children:e.jsx(yt,{children:e.jsxs(Nt,{children:[e.jsx(z,{path:"/",element:e.jsx(Rt,{})}),e.jsx(z,{path:"/main",element:e.jsx(Mt,{isDoctor:l,setIsDoctor:n})}),e.jsx(z,{path:"/form",element:e.jsx(Dt,{})}),e.jsx(z,{path:"/pie",element:e.jsx(es,{})}),e.jsx(z,{path:"/patient",element:e.jsx(Lt,{isDoctor:l})}),e.jsx(z,{path:"/signin",element:e.jsx(Vt,{setIsDoctor:n,isDoctor:l})}),e.jsx(z,{path:"/newSignin",element:e.jsx(It,{})}),e.jsx(z,{path:"/upload",element:e.jsx(zt,{})}),e.jsx(z,{path:"/load",element:e.jsx(Zt,{})}),e.jsx(z,{path:"/pdfShow",element:e.jsx(Bt,{})}),e.jsx(z,{path:"/doctoranalysis",element:e.jsx(Tt,{})}),e.jsx(z,{path:"/caretakeranalysis",element:e.jsx($t,{})}),e.jsx(z,{path:"/edit",element:e.jsx(Ut,{})}),e.jsx(z,{path:"/result",element:e.jsx(Ie,{})}),e.jsx(z,{path:"/chatbot",element:e.jsx(Ve,{})}),e.jsx(z,{path:"/Food",element:e.jsx(Gt,{})}),e.jsx(z,{path:"/Forum",element:e.jsx(_t,{})}),e.jsx(z,{path:"/consult",element:e.jsx(Kt,{})}),e.jsx(z,{path:"/Statement",element:e.jsx(Qt,{})})]})})})}Ct.createRoot(document.getElementById("root")).render(e.jsx(kt.StrictMode,{children:e.jsx(ts,{})}));
